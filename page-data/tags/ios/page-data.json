{"componentChunkName":"component---src-templates-tag-js","path":"/tags/ios/","result":{"data":{"site":{"siteMetadata":{"title":"TOMOSIA VIETNAM","author":"「共に」「幸せ」「灯す」","labels":[{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow"},{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"M11.177 25.3a1.94 1.94 0 0 1-.969-.259l-3.086-1.826c-.46-.257-.235-.349-.083-.402.614-.213.739-.262 1.394-.635.069-.038.159-.024.231.018l2.37 1.407a.304.304 0 0 0 .287 0l9.241-5.333a.292.292 0 0 0 .141-.25V7.355a.3.3 0 0 0-.143-.255l-9.237-5.329a.29.29 0 0 0-.285 0L1.803 7.102a.296.296 0 0 0-.146.253v10.666c0 .102.056.198.145.247l2.532 1.462c1.374.687 2.215-.122 2.215-.935V8.265c0-.149.12-.266.269-.266H7.99c.146 0 .267.117.267.266v10.53c0 1.833-.998 2.885-2.736 2.885-.534 0-.955 0-2.129-.579L.969 19.706A1.953 1.953 0 0 1 0 18.02V7.355c0-.693.371-1.339.969-1.684l9.242-5.34a2.023 2.023 0 0 1 1.942 0l9.241 5.34c.599.346.971.992.971 1.684V18.02c0 .693-.372 1.337-.971 1.686l-9.241 5.335a1.942 1.942 0 0 1-.973.259zm2.855-7.348c-4.045 0-4.892-1.857-4.892-3.414 0-.148.118-.266.266-.266h1.195c.133 0 .245.096.265.226.18 1.216.717 1.831 3.164 1.831 1.946 0 2.775-.441 2.775-1.473 0-.596-.234-1.037-3.26-1.334-2.528-.25-4.093-.809-4.093-2.831 0-1.865 1.572-2.977 4.207-2.977 2.961 0 4.425 1.027 4.611 3.233a.27.27 0 0 1-.267.291h-1.2a.266.266 0 0 1-.259-.209c-.288-1.28-.988-1.689-2.886-1.689-2.126 0-2.373.74-2.373 1.295 0 .673.292.869 3.161 1.248 2.84.375 4.19.907 4.19 2.902 0 2.014-1.678 3.167-4.606 3.167z","size":20,"color":"lightgreen"},{"tag":"ruby","tech":"Ruby","name":"M20.156.083c3.033.525 3.893 2.598 3.829 4.77L24 4.822 22.635 22.71 4.89 23.926h.016C3.433 23.864.15 23.729 0 19.139l1.645-3 2.819 6.586.503 1.172 2.805-9.144-.03.007.016-.03 9.255 2.956-1.396-5.431-.99-3.9 8.82-.569-.615-.51L16.5 2.114 20.159.073l-.003.01zM0 19.089v.026-.029.003zM5.13 5.073c3.561-3.533 8.157-5.621 9.922-3.84 1.762 1.777-.105 6.105-3.673 9.636-3.563 3.532-8.103 5.734-9.864 3.957-1.766-1.777.045-6.217 3.612-9.75l.003-.003z","size":20,"color":"crimson"},{"tag":"rails","tech":"Ruby on Rails","name":"M20.8848485 15.8107143v1.1635714h1.9818182c.4060606 0 1.1030303-.315 1.1272727-1.19571427v-.45c0-.75214286-.5818182-1.1957143-1.1272727-1.1957143h-.9878788v-.54h1.9575757v-1.17h-1.8787878c-.4848485 0-1.1333334.42428573-1.1333334 1.215v.405c0 .7907143.6424243 1.1957143 1.1333334 1.1957143 1.3636363.00642857-.3272728 0 .9333333 0v.56571428l-2.0060606.0064286zm-10.6181818-.28285716s1.060606-.09642857 1.060606-1.5492857c0-1.45285715-1.2848485-1.58785715-1.2848485-1.58785715H7.72727273v4.5835714H8.8909091v-1.1057143l1.0060606 1.1057142h1.7212121l-1.3515151-1.4464286zm-.44848488-.93857143H8.8909091v-1.0478571h.93333332s.26060608.1028572.26060608.5207143c0 .4178572-.26666668.5271429-.26666668.5271429zM14.2 12.4228572h-1.1818182c-.8424242 0-1.1272727.81-1.1272727 1.1957143v3.35571427h1.1818182v-.8035714h1.1090909v.8035714h1.1454545V13.6185715c0-.97714286-.8363636-1.1957143-1.1272727-1.1957143zm-.0181818 2.44928572h-1.1151515V13.76s0-.2507143.3696969-.2507143h.4060606c.3272728 0 .3333334.2507143.3333334.2507143v1.11214286h.0060606zm1.6848485-2.44928573h1.230303v4.5514285h-1.230303v-4.5514285zm2.9575757 3.375v-3.375H17.6v4.5514285h2.8787879v-1.1764285h-1.6545455zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76363636.16714284-3.93333333 1.87071427-5.2060606 4.12071427-1.27272726 2.25-1.45454546 4.1528571-1.45454546 4.1528571zM.42424242 16.9742857h4.7878788S4.2969697 12.545 7.3272727 10.75142858c.66060607-.34071428 2.76363638-1.61357143 6.20606058 1.08642857.1090909-.09642857.2121212-.17357143.2121212-.17357143s-3.1515151-3.33642856-6.66060602-2.9635714c-1.76969696.16714284-3.93939393 1.87071427-5.2121212 4.12071427C.6 15.0714285.4242424 16.9742857.4242424 16.9742857zM10.4 9.0607143L10.4242424 8.63c-.0545454-.03214286-.2060606-.1092857-.58787876-.225l-.02424243.4242857c.2.0707143.3939394.14785716.5878788.2314286zM9.82424242 10.42357143l-.02424242.405c.2.00642857.4.03214286.6.07714286l.0242424-.3985715c-.2060606-.045-.4060606-.0707143-.59999998-.0835715zm-2.24242424-2.0057143h.06060606l-.12121212-.39214284c-.1878788 0-.38181818.0128571-.58181818.0385714l.1151515.3792857c.1757576-.0192857.35151517-.0257143.52727274-.0257143zm.2909091 2.3657143l.13939393.44357143c.1757576-.09.3515152-.16714286.5272728-.225l-.1333333-.42428572c-.2060606.06428572-.3818182.135-.5333333.2057143zM5.1212121 9.09285713l-.27272727-.44357142c-.15151515.0835715-.3090909.1735715-.47272727.2764286l.27878787.45c.15757576-.1028571.3090909-.1992857.46666667-.2828571zm1.24242424 2.89285716l.2909091.4628571c.1030303-.1607143.22424242-.3085715.35757575-.4564286L6.7393939 11.555c-.13939394.135-.26666667.28285714-.37575758.4307143zm-.87878788 2.07l.4909091.4114285C6 14.2164285 6.04242424 13.9657143 6.1030303 13.715l-.43636363-.36642857c-.07878788.23785714-.13333334.47571428-.1818182.70714286zM2.830303 11.0021428L2.4 10.60357142c-.15757576.1607143-.3090909.32142858-.44848485.48214287L2.41818182 11.51c.12727273-.17357143.26666666-.34714286.4121212-.50785714zM1 13.8757143l-.6969697-.27c-.1151515.27642856-.24242424.59785713-.3030303.77142856l.6969697.27C.77575758 14.42857143.9030303 14.11357143 1 13.8757143zm4.3939394 1.81285713c.0121212.34071428.04242424.61714286.07272727.81L6.1939394 16.775c-.05454546-.2507143-.10909092-.53357143-.14545455-.8357143l-.65454546-.25071427z","size":20,"color":"#CC0000"},{"tag":"php","tech":"php","name":"M7.01 10.207h-.944l-.515 2.648h.838c.556 0 .97-.105 1.242-.314.272-.21.455-.559.55-1.049.092-.47.05-.802-.124-.995-.175-.193-.523-.29-1.047-.29zM12 5.688C5.373 5.688 0 8.514 0 12s5.373 6.313 12 6.313S24 15.486 24 12c0-3.486-5.373-6.312-12-6.312zm-3.26 7.451c-.261.25-.575.438-.917.551-.336.108-.765.164-1.285.164H5.357l-.327 1.681H3.652l1.23-6.326h2.65c.797 0 1.378.209 1.744.628.366.418.476 1.002.33 1.752a2.836 2.836 0 0 1-.305.847c-.143.255-.33.49-.561.703zm4.024.715l.543-2.799c.063-.318.039-.536-.068-.651-.107-.116-.336-.174-.687-.174H11.46l-.704 3.625H9.388l1.23-6.327h1.367l-.327 1.682h1.218c.767 0 1.295.134 1.586.401s.378.7.263 1.299l-.572 2.944h-1.389zm7.597-2.265a2.782 2.782 0 0 1-.305.847c-.143.255-.33.49-.561.703a2.44 2.44 0 0 1-.917.551c-.336.108-.765.164-1.286.164h-1.18l-.327 1.682h-1.378l1.23-6.326h2.649c.797 0 1.378.209 1.744.628.366.417.477 1.001.331 1.751zM17.766 10.207h-.943l-.516 2.648h.838c.557 0 .971-.105 1.242-.314.272-.21.455-.559.551-1.049.092-.47.049-.802-.125-.995s-.524-.29-1.047-.29z","size":20,"color":"#777BB4"},{"tag":"laravel","tech":"Laravel","name":"M23.644 5.43c.009.032.014.065.014.099v5.15c0 .135-.073.26-.189.326l-4.323 2.49v4.934c0 .135-.072.258-.188.326L9.931 23.95c-.021.012-.043.02-.066.027-.008.002-.016.008-.024.01-.063.018-.13.018-.192 0-.011-.002-.02-.008-.029-.012-.021-.008-.043-.014-.063-.025L.534 18.755c-.117-.068-.189-.191-.189-.326V2.974c0-.033.005-.066.014-.098.003-.012.01-.021.014-.032.006-.02.014-.04.023-.058.004-.013.015-.022.023-.033.012-.016.021-.031.033-.045.012-.01.025-.018.037-.027.014-.012.027-.024.041-.034h.001L5.044.05c.115-.067.259-.067.375 0l4.512 2.597h.002c.015.01.027.021.041.033.012.009.025.018.037.027.013.014.021.029.033.045.008.011.02.021.025.033.011.019.017.038.024.058.003.011.011.021.013.032.01.031.014.064.014.098v9.652l3.76-2.164V5.527c0-.033.005-.066.014-.098.003-.011.009-.021.013-.032.007-.02.014-.039.024-.059.007-.012.018-.021.025-.033.012-.015.021-.03.033-.043.012-.012.025-.02.037-.028.014-.011.026-.023.041-.032h.001l4.513-2.598c.116-.067.259-.067.375 0l4.513 2.598c.016.01.027.021.042.031.012.01.025.018.036.028.013.014.022.029.034.044.008.012.019.021.024.033.011.02.018.039.024.059.006.011.012.022.015.033zm-.74 5.032V6.179l-1.578.908-2.182 1.256v4.283l3.76-2.164zm-4.511 7.75v-4.287l-2.146 1.225-6.127 3.498v4.326l8.273-4.762zM1.095 3.624v14.588l8.273 4.762v-4.326l-4.322-2.445-.002-.003h-.002c-.014-.01-.025-.021-.04-.031-.011-.01-.024-.018-.035-.027l-.001-.002c-.013-.012-.021-.025-.031-.039-.01-.012-.021-.023-.028-.037h-.002c-.008-.014-.013-.031-.02-.047-.006-.016-.014-.027-.018-.043-.004-.018-.006-.037-.008-.057-.002-.014-.006-.027-.006-.041V5.789l-2.18-1.257-1.578-.908zM5.231.81l-3.76 2.164 3.76 2.164 3.758-2.164L5.231.81zm1.956 13.505l2.182-1.256V3.624l-1.58.909-2.182 1.256v9.435l1.58-.909zM18.769 3.364l-3.76 2.164 3.76 2.163 3.759-2.164-3.759-2.163zm-.376 4.979l-2.182-1.256-1.579-.908v4.283l2.182 1.256 1.579.908V8.343zm-8.65 9.654l5.514-3.148 2.756-1.572-3.757-2.163-4.324 2.489-3.941 2.27 3.752 2.124z","size":20,"color":"#FF2D20"},{"tag":"cakephp","tech":"CakePHP","name":"M0 13.875v3.745c0 2.067 5.37 3.743 12 3.743V17.62c-6.63 0-12-1.68-12-3.743v-.002zm21.384 2.333L12 13.875v3.745l9.384 2.333C23.02 19.313 24 18.503 24 17.62v-3.745c0 .882-.98 1.692-2.616 2.333zM12 10.133v3.742c-6.627 0-12-1.677-12-3.744V6.38c0-2.064 5.37-3.743 12-3.743 6.625 0 12 1.68 12 3.744v3.75c0 .883-.98 1.69-2.616 2.334L12 10.13v.003z","size":20,"color":"#D33C43"},{"tag":"swift","tech":"Swift","name":"M21.984 16.348c.056-.112.056-.224.112-.336 1.346-5.272-1.851-11.44-7.347-14.693 2.412 3.253 3.365 7.122 2.524 10.599-.056.28-.168.617-.28.897a5.173 5.173 0 0 1-.45-.28S11.104 9.17 5.273 3.282c-.169-.168 3.14 4.71 6.841 8.58-1.738-1.01-6.673-4.542-9.758-7.403.337.617.842 1.234 1.346 1.851 2.58 3.309 5.945 7.346 9.983 10.43-2.86 1.74-6.842 1.851-10.88 0-1.01-.448-1.85-1.009-2.804-1.682 1.682 2.636 4.318 5.048 7.459 6.337 3.757 1.627 7.57 1.515 10.318 0h.057c.112-.056.224-.112.336-.224 1.346-.673 3.982-1.402 5.44 1.402.392.785 1.121-2.86-1.626-6.225z","size":20,"color":"#FA7343"},{"tag":"ios","tech":"iOS","name":"M7.078 23.55c-.473-.316-.893-.703-1.244-1.15-.383-.463-.738-.95-1.064-1.454-.766-1.12-1.365-2.345-1.78-3.636-.5-1.502-.743-2.94-.743-4.347 0-1.57.34-2.94 1.002-4.09.49-.9 1.22-1.653 2.1-2.182.85-.53 1.84-.82 2.84-.84.35 0 .73.05 1.13.15.29.08.64.21 1.07.37.55.21.85.34.95.37.32.12.59.17.8.17.16 0 .39-.05.645-.13.145-.05.42-.14.81-.31.386-.14.692-.26.935-.35.37-.11.728-.21 1.05-.26.39-.06.777-.08 1.148-.05.71.05 1.36.2 1.94.42 1.02.41 1.843 1.05 2.457 1.96-.26.16-.5.346-.725.55-.487.43-.9.94-1.23 1.505-.43.77-.65 1.64-.644 2.52.015 1.083.29 2.035.84 2.86.387.6.904 1.114 1.534 1.536.31.21.582.355.84.45-.12.375-.252.74-.405 1.1-.347.807-.76 1.58-1.25 2.31-.432.63-.772 1.1-1.03 1.41-.402.48-.79.84-1.18 1.097-.43.285-.935.436-1.452.436-.35.015-.7-.03-1.034-.127-.29-.095-.576-.202-.856-.323-.293-.134-.596-.248-.905-.34-.38-.1-.77-.148-1.164-.147-.4 0-.79.05-1.16.145-.31.088-.61.196-.907.325-.42.175-.695.29-.855.34-.324.096-.656.154-.99.175-.52 0-1.004-.15-1.486-.45zm6.854-18.46c-.68.34-1.326.484-1.973.436-.1-.646 0-1.31.27-2.037.24-.62.56-1.18 1-1.68.46-.52 1.01-.95 1.63-1.26.66-.34 1.29-.52 1.89-.55.08.68 0 1.35-.25 2.07-.228.64-.568 1.23-1 1.76-.435.52-.975.95-1.586 1.26z","size":20,"color":"#403f3f"},{"tag":"kotlin","tech":"Kotlin","name":"M1.3 24l11.3-11.5L24 24zM0 0h12L0 12.5zM13.4 0L0 14v10l12-12L24 0z","size":20,"color":"#0095D5"},{"tag":"android","tech":"Android","name":"M24 19H0a13.6 13.6 0 0 1 2.21-6.07A11.2 11.2 0 0 1 5.87 9.4l.41-.23-2.02-3.41a.51.51 0 0 1 .17-.7.5.5 0 0 1 .69.18l2.08 3.5a12.62 12.62 0 0 1 4.84-.9 12.2 12.2 0 0 1 4.75.9l2.07-3.5a.5.5 0 0 1 .7-.17.51.51 0 0 1 .16.7L17.7 9.19l.5.28a11.38 11.38 0 0 1 3.63 3.62A14.48 14.48 0 0 1 24 19zm-7.5-4.48a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1zm-11 0a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1 1 1 0 0 0-1 1z","size":20,"color":"#3DDC84"},{"tag":"git","tech":"Git","name":"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187","size":20,"color":"#403f3f"},{"tag":"aws","tech":"AWS","name":"M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.375 6.18 6.18 0 0 1-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103-.295.072-.583.16-.862.272a2.287 2.287 0 0 1-.28.104.488.488 0 0 1-.127.023c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597 0 0 1 .224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66 0 0 0-.735-.136 6.02 6.02 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783c.151 0 .255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1.137 1.137 0 0 1-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247.048 0 .096.008.144.024.048.016.12.048.2.08.271.12.566.215.878.279.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.777.777 0 0 0-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902 0 0 1-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175 0 .359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69 0 0 1 .24.2.43.43 0 0 1 .071.263v.375c0 .168-.064.256-.184.256a.83.83 0 0 1-.303-.096 3.652 3.652 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223-.248.152-.375.383-.375.71 0 .224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117 0 .343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zM21.698 16.207c-2.626 1.94-6.442 2.969-9.722 2.969-4.598 0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914 0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zM22.792 14.961c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z","size":20,"color":"#232F3E"},{"tag":"instagram","tech":"Instagram","name":"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z","size":20,"color":"#E4405F"},{"tag":"facebook","tech":"Facebook","name":"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z","size":20,"color":"#1877F2"},{"tag":"gitlab ci","tech":"Gitlab CI","name":"M4.844.904a1.007 1.007 0 00-.955.692l-2.53 7.783c0 .007-.005.012-.007.02L.07 13.335a1.437 1.437 0 00.522 1.607l11.072 8.045a.566.566 0 00.67-.004l11.074-8.04a1.436 1.436 0 00.522-1.61l-1.26-3.867a.547.547 0 00-.031-.104l-2.526-7.775a1.004 1.004 0 00-.957-.684.987.987 0 00-.949.69l-2.406 7.408H8.203l-2.41-7.408a.987.987 0 00-.943-.69h-.006zm-.006 1.42l2.174 6.678H2.674l2.164-6.678zm14.328 0l2.168 6.678h-4.342l2.174-6.678zm-10.594 7.81h6.862l-2.15 6.618L12 20.693 8.572 10.135zm-5.515.005h4.322l3.086 9.5-7.408-9.5zm13.568 0h4.326l-6.703 8.588-.709.914 2.959-9.108.127-.394zM2.1 10.762l6.978 8.947-7.818-5.682a.305.305 0 01-.112-.341l.952-2.924zm19.8 0l.952 2.922a.305.305 0 01-.11.341v.002l-7.82 5.68.025-.035 6.953-8.91Z","size":20,"color":"#FCA121"}]}},"allMarkdownRemark":{"totalCount":9,"edges":[{"node":{"excerpt":"MessageKit Là Gì ?    MessageKit là một thư viện mã nguồn mở dùng để tạo ra màn hình chat với chuẩn về UI/UX. Github: MessageKit Cấu trúc của MessageKit Cấu trúc của Cell.\nMessageKit chia làm hai loại…","snippet":"<div class=\"custom-block-body\"><p>   <strong>MessageKit</strong> l&#xE0; m&#x1ED9;t th&#x1B0; vi&#x1EC7;n m&#xE3; ngu&#x1ED3;n m&#x1EDF; d&#xF9;ng &#x111;&#x1EC3; t&#x1EA1;o ra m&#xE0;n h&#xEC;nh chat v&#x1EDB;i chu&#x1EA9;n v&#x1EC1; UI/UX.</p></div>","html":"<h1>MessageKit Là Gì ?</h1>\n<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>   <strong>MessageKit</strong> là một thư viện mã nguồn mở dùng để tạo ra màn hình chat với chuẩn về UI/UX.</p></div></div>\n<p>Github: <a href=\"https://github.com/MessageKit/MessageKit\">MessageKit</a></p>\n<h3>Cấu trúc của MessageKit</h3>\n<ol>\n<li>\n<p>Cấu trúc của Cell.\nMessageKit chia làm hai loại Cell đó là mặc định và custom. Cell mặc định đó là những Cell do MessageKit cung cấp cho chúng ta, chúng kế thừa từ class <strong>MessageContentCell</strong>. Cell custom là những Cell mà ta tự custom, chúng kế thừa từ class <strong>UICollectionViewCell</strong>.</p>\n<p>Với Cell mặc định còn chia thành nhiều loại khác nhau gồm: TextMessageCell, MediaMessageCell, LocationMessageCell, AudioMessageCell, ContactMessageCell, LinkPreviewMessageCell.</p>\n<p>Hãy xem kiểu MessageKind được define trong MessageKit như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token builtin\">MessageKind</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// TextMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">attributedText</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">NSAttributedString</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// TextMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">photo</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">MediaItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// MediaMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">video</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">MediaItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// MediaMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">location</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">LocationItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// LocationMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">emoji</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// TextMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">audio</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">AudioItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// AudioMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">contact</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">ContactItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ContactMessageCell</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">linkPreview</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">LinkItem</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// LinkPreviewMessageCell</span>\n\n<span class=\"token comment\">/// A custom message.</span>\n<span class=\"token comment\">/// - Note: Using this case requires that you implement the following methods and handle this case:</span>\n<span class=\"token comment\">///   - MessagesDataSource: customCell(for message: MessageType, at indexPath: IndexPath, in messagesCollectionView: MessagesCollectionView) -> UICollectionViewCell</span>\n<span class=\"token comment\">///   - MessagesLayoutDelegate: customCellSizeCalculator(for message: MessageType, at indexPath: IndexPath, in messagesCollectionView: MessagesCollectionView) -> CellSizeCalculator</span>\n<span class=\"token keyword\">case</span> <span class=\"token function\">custom</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Any</span><span class=\"token operator\">?</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tất cả những Cell mặc định trên đều sẽ kế thừa từ MessageContentCell nên nó đều có cấu trúc giống như sau:\n<img src=\"https://raw.githubusercontent.com/MessageKit/MessageKit/master/Assets/CellStructure.png\" alt=\"MessageContentCell\">\nNó chia làm 7 phần, lần lượt từ dưới xuống đó là: cellTopLabel, messageTopLabel, messageContainerView, messageBottomLabel, cellBottomLabel và hai phần đặc biệt đó là avatarView, accessoryView.</p>\n</li>\n<li>\n<p>Cấu trúc của MessageInputBar.\nMessageInputBar là class được MessageKit tích hợp từ thư viện <a href=\"https://github.com/nathantannar4/InputBarAccessoryView\">InputBarAccessoryView</a>. MessageInputBar có cấu trúc như sau:\n<img src=\"https://raw.githubusercontent.com/MessageKit/MessageKit/master/Assets/InputBarAccessoryViewLayout.png\" alt=\"MessageInputBar\">\nVới cấu trúc như trên thì nó rất dễ để customize như thay đổi size, thêm các button.</p>\n<h3>Demo</h3>\n<p>Tới đây chúng ta sẽ cùng implement một màn hình Chat đơn giản với MessageKit.\nĐầu tiên, cần khởi tạo project với XCode và pod install với lệnh sau được thêm vào file Podfile.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">pod &#39;MessageKit&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Vì MessageKit đã tích hợp sẵn với InputBarAccessoryView nên ta không cần phải install InputBarAccessoryView nữa.\nProject của chúng ta sẽ như thế này sau khi khởi tạo:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/c2d13/start_project.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACCUlEQVQoz32S22vUQBTG87eYy2RmksllMrlsuttdLRYqRa3Yxa5YfFBBainoi4gXVBB99+/9PCfZ1d0Kffg4mcnMb75z8craYb6Yoa4bSKlIGqZsUTU9bFnAZKxykNIGOskRhBJ+IBAJhVt+gDCK4NO3H0bwrGuxenqOe8cnSAxfKlCUHbKiobUjgIVUBWKZUcwp5sOaz/FeSKBQSILGiGIFL6GXHz5eYnHncABqutS5GTLbIy86GIIyaFcbuBlhW/ImE4ujo7tQSUYykDqDzRo0bo7CTZGailyWfx1tJMmpiA2C6BrQUu26roNO6WBukWSOwCXitQsGqTVQ6mInxvSfgX4oBg1AqVJyYEZg4RDzZTXW6f9Ut7WpoURKjUtMPgI51dRQurQR1TOItKJ0zPD6dorXxVBOOSSHgiaDtQYaJCk7pPpRg2JNr/OlG9z96/hYw4A6zBqAnC471ElKddHDoZtT3QUH62aMUXENNTSBpFJ0gOwLTQPL42CGyBJ0UcQZzdk68p5ISQmlLMjdKP72bDtHOz2AmyzQ9LeR2j3YqsXEVahcDVc5lGmJIi9hC4ucYm1r2HoPisbLpwcCGqGAG6RLeNNnP9GffUO/+o7+yVfsP/+FNxcX+P3pBd6+v8K7V0uc7x9ief8Ar1cnOH70AJcvL7G6+ojp2Qc0p1/QLkmnn4nxA38A0jt6IouHQ/IAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Start project\"\n        title=\"Start project\"\n        src=\"/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/8c557/start_project.png\"\n        srcset=\"/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/4edbd/start_project.png 175w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/13ae7/start_project.png 350w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/8c557/start_project.png 700w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/e996b/start_project.png 1050w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/2cefc/start_project.png 1400w,\n/static/cc7ef53d9d8f3076db17bbcfe0ef33c2/c2d13/start_project.png 2560w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nMessageKit cung cấp cho chúng ta một UIViewController là MessagesViewController, đây là class đã cung cấp sẵn một UICollectionView, và các thuộc tính và phương thức tiện ích để xử lý keyboard, show thời gian khi swipe, ... Có một vấn đề là do Swift không hỗ trợ đa kế thừa nên không thể dùng ViewController kế thừa trực tiếp MessagesViewController được vì ViewController cần phải kế thừa BaseVC. Cho nên chúng ta cần tạo ra một class là MessageController cho việc kế thừa MessagesViewController và sẽ add MessageController vào trong ViewController.\nMessageController sau khi khởi tạo như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">MessageKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">Foundation</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>class MessageController: MessagesViewController {\nweak var viewController: ViewController?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">override func viewDidLoad() {\n    super.viewDidLoad()\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Add MessageController vào ViewController:\n```swift\nimport MessageKit\nimport UIKit\n\nclass ViewController: UIViewController {\n\n    private lazy var messageController: MessageController = {\n        let vc = MessageController()\n        vc.viewController = self\n        return vc\n    }()\n    \n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        addChild(messageController)\n        messageController.view.autoresizingMask = [.flexibleWidth, .flexibleHeight]\n        messageController.view.frame = view.bounds\n        view.addSubview(messageController.view)\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó ở MessageCollectionView, ta cần config MessageCollectionView và config MessageInputBar.\nConfig MessageCollectionView thì dùng hàm sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">func</span> <span class=\"token function\">configureMessageCollectionView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span>messagesDataSource <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span>messageCellDelegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span>messagesLayoutDelegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span>messagesDisplayDelegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        scrollsToLastItemOnKeyboardBeginsEditing <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// default false</span>\n        maintainPositionOnKeyboardFrameChanged <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// default false</span>\n        showMessageTimestampOnSwipeLeft <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// default false</span>\n        \n        <span class=\"token comment\">// Với những Cell của message do currentUser gửi thì sẽ không hiển thị avatar</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> layout <span class=\"token operator\">=</span> messagesCollectionView<span class=\"token punctuation\">.</span>collectionViewLayout <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">MessagesCollectionViewFlowLayout</span> <span class=\"token punctuation\">{</span>\n            layout<span class=\"token punctuation\">.</span>textMessageSizeCalculator<span class=\"token punctuation\">.</span>outgoingAvatarSize <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>zero\n            layout<span class=\"token punctuation\">.</span>textMessageSizeCalculator<span class=\"token punctuation\">.</span>outgoingMessageBottomLabelAlignment<span class=\"token punctuation\">.</span>textInsets<span class=\"token punctuation\">.</span><span class=\"token keyword\">right</span> <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\n            layout<span class=\"token punctuation\">.</span>photoMessageSizeCalculator<span class=\"token punctuation\">.</span>outgoingAvatarSize <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>zero\n            layout<span class=\"token punctuation\">.</span>photoMessageSizeCalculator<span class=\"token punctuation\">.</span>outgoingMessageBottomLabelAlignment<span class=\"token punctuation\">.</span>textInsets<span class=\"token punctuation\">.</span><span class=\"token keyword\">right</span> <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Về MessageInputBar thì có thể dùng luôn biến messageInputBar được define sẵn trong class MessagesViewController hoặc dùng một input bar tự custom khác. Ở đây, mình dùng một MessageInputBar tự custom như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">InputBarAccessoryView</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n\n<span class=\"token keyword\">protocol</span> <span class=\"token builtin\">SlackInputBarDelegate</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">class</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">slackInputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> view<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBar</span><span class=\"token punctuation\">,</span> didTapCameraButton button<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarButtonItem</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">slackinputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> view<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBar</span><span class=\"token punctuation\">,</span> didTapLibraryButton button<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarButtonItem</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SlackInputBar</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarAccessoryView</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">weak</span> <span class=\"token keyword\">var</span> slackDelegate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBarDelegate</span><span class=\"token operator\">?</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> frame<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">required</span> <span class=\"token keyword\">init</span><span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>coder aDecoder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSCoder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">fatalError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"init(coder:) has not been implemented\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">func</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> items <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token function\">makeButton</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ic_camera\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>onTextViewDidChange <span class=\"token punctuation\">{</span> button<span class=\"token punctuation\">,</span> textView <span class=\"token keyword\">in</span>\n                button<span class=\"token punctuation\">.</span>isEnabled <span class=\"token operator\">=</span> textView<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">.</span><span class=\"token builtin\">isEmpty</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> item <span class=\"token keyword\">in</span>\n                <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> <span class=\"token keyword\">self</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n                item<span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>systemBlue\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>slackDelegate<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">slackInputBar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> didTapCameraButton<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">.</span>flexibleSpace<span class=\"token punctuation\">,</span>\n            <span class=\"token function\">makeButton</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ic_library\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> item <span class=\"token keyword\">in</span>\n                    <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> <span class=\"token keyword\">self</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n                    item<span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>systemBlue\n                    <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>slackDelegate<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">slackinputBar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> didTapLibraryButton<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            sendButton\n                <span class=\"token punctuation\">.</span>configure <span class=\"token punctuation\">{</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>cornerRadius <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>borderWidth <span class=\"token operator\">=</span> <span class=\"token number\">1.5</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>borderColor <span class=\"token operator\">=</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">titleColor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>cgColor\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setTitleColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>normal<span class=\"token punctuation\">)</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setTitleColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>highlighted<span class=\"token punctuation\">)</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">52</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onDisabled <span class=\"token punctuation\">{</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>borderColor <span class=\"token operator\">=</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">titleColor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>cgColor\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>clear\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onEnabled <span class=\"token punctuation\">{</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>systemBlue\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>borderColor <span class=\"token operator\">=</span> <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">.</span>cgColor\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span>\n                    <span class=\"token comment\">// We use a transform because changing the size would cause the other views to relayout</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token function\">CGAffineTransform</span><span class=\"token punctuation\">(</span>scaleX<span class=\"token punctuation\">:</span> <span class=\"token number\">1.2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">1.2</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onDeselected <span class=\"token punctuation\">{</span>\n                    $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token builtin\">CGAffineTransform</span><span class=\"token punctuation\">.</span>identity\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n        items<span class=\"token punctuation\">.</span>forEach <span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>lightGray <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// We can change the container insets if we want</span>\n        inputTextView<span class=\"token punctuation\">.</span>textContainerInset <span class=\"token operator\">=</span> <span class=\"token function\">UIEdgeInsets</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        inputTextView<span class=\"token punctuation\">.</span>placeholderLabelInsets <span class=\"token operator\">=</span> <span class=\"token function\">UIEdgeInsets</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">let</span> maxSizeItem <span class=\"token operator\">=</span> <span class=\"token function\">InputBarButtonItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span>configure <span class=\"token punctuation\">{</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"icons8-expand\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRenderingMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>alwaysTemplate<span class=\"token punctuation\">)</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>darkGray\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">let</span> oldValue <span class=\"token operator\">=</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>inputBarAccessoryView<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>shouldForceTextViewMaxHeight <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token boolean\">false</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> oldValue <span class=\"token operator\">?</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"icons8-expand\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRenderingMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>alwaysTemplate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token string\">\"icons8-collapse\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRenderingMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>alwaysTemplate<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">setShouldForceMaxTextViewHeight</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>oldValue<span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        rightStackView<span class=\"token punctuation\">.</span>alignment <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>top\n        <span class=\"token function\">setStackViewItems</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>maxSizeItem<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> forStack<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token keyword\">right</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setRightStackViewWidthConstant</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">// Finally set the items</span>\n        <span class=\"token function\">setStackViewItems</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">,</span> forStack<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>bottom<span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n        shouldAnimateTextDidChangeLayout <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">makeButton</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">InputBarButtonItem</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">InputBarButtonItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span>configure <span class=\"token punctuation\">{</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>spacing <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token function\">fixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>named<span class=\"token punctuation\">:</span> named<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">withRenderingMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>alwaysTemplate<span class=\"token punctuation\">)</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSize</span><span class=\"token punctuation\">(</span><span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onSelected <span class=\"token punctuation\">{</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>systemBlue\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>onDeselected <span class=\"token punctuation\">{</span>\n                $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>lightGray\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau đó ta tạo một instance của SlackInputBar ở MessageController và setup cho nó như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">lazy</span> <span class=\"token keyword\">var</span> slackInputBar <span class=\"token operator\">=</span> <span class=\"token function\">SlackInputBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">configureMessageInputBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    slackInputBar<span class=\"token punctuation\">.</span>slackDelegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n    slackInputBar<span class=\"token punctuation\">.</span>delegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Để hiển thị được SlackInputBar thì cần setup như sau ở ViewController:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> inputAccessoryView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIView</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> messageVC<span class=\"token punctuation\">.</span>slackInputBar\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> canBecomeFirstResponder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Bool</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Lúc này, khi run app, ta có thể nhận được màn hình màn Chat như sau:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/051dda9f8c50212623256c3c77ab3983/8efc2/chat_init.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.57142857142856%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAAAsSAAALEgHS3X78AAABeElEQVRIx+1X246CQAyd//8m133SRGT/QRGM4oKsMNyh21N3yEp0DYkP+zBNTjrTaU9beGlVkef0lSQU+D7FcURlUVCuNcEOfQ/mDTq9XCQ2CHyxqaosKTweae045G23VFfVEAjypq7FZjBOGEcRfbguOasVFSDEA5y6tuWAcnCGLTmfaed5kvBwONA+CMSGN/j8jm2bRu4KBDrLKEtT0bnORKNyf7ejt9lMsr/P5+Su19IFSOBjgFgg57NqmBltDWiAhmo+d11HkL7vBRDppL76XH1vYxU9EUM0Pj8SZbK/Ck8rnCqW0BJaQktoCS2hJbSEEwj/7WwzEL6qsqFlDJUwQE9BizGYYe5mCBXCgkfcqe2NzymPxOARwpLn6fG3eNZexRsBAEGlOEMrMC+XSwrD8CajaWvcKtqCeLwduLxOdF1Pp9MnRVHMVf4M7QkvPvgG4wH9L0F7cRyLr9Y5QwuHuvfrTQWofMUrhYHDy9FisaDNZvMw0TeHiUlsF/s+pAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ViewController\"\n        title=\"ViewController\"\n        src=\"/static/051dda9f8c50212623256c3c77ab3983/8c557/chat_init.png\"\n        srcset=\"/static/051dda9f8c50212623256c3c77ab3983/4edbd/chat_init.png 175w,\n/static/051dda9f8c50212623256c3c77ab3983/13ae7/chat_init.png 350w,\n/static/051dda9f8c50212623256c3c77ab3983/8c557/chat_init.png 700w,\n/static/051dda9f8c50212623256c3c77ab3983/8efc2/chat_init.png 828w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nTiếp theo, ta sẽ cần implement phần Chat, ta làm phần này trên class MessageController. Tuy nhiên trước tiên cần phải implement hai model là User và Message.\n<strong>User</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">MessageKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">Foundation</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token builtin\">User</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> senderId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> displayName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Message</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">Foundation</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">MessageKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">struct</span> <span class=\"token builtin\">ImageMediaItem</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">MediaItem</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> url<span class=\"token punctuation\">:</span> <span class=\"token constant\">URL</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">var</span> image<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImage</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">var</span> placeholderImage<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImage</span>\n    <span class=\"token keyword\">var</span> size<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImage</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> image\n        size <span class=\"token operator\">=</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">)</span>\n        placeholderImage <span class=\"token operator\">=</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>imageURL<span class=\"token punctuation\">:</span> <span class=\"token constant\">URL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        url <span class=\"token operator\">=</span> imageURL\n        size <span class=\"token operator\">=</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">)</span>\n        placeholderImage <span class=\"token operator\">=</span> <span class=\"token function\">UIImage</span><span class=\"token punctuation\">(</span>imageLiteralResourceName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"image_message_placeholder\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token builtin\">Message</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessageType</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span>\n    <span class=\"token keyword\">var</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span>\n    <span class=\"token keyword\">var</span> kind<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessageKind</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span><span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span><span class=\"token punctuation\">,</span> kind<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessageKind</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>sender <span class=\"token operator\">=</span> sender\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>messageId <span class=\"token operator\">=</span> messageId\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>sentDate <span class=\"token operator\">=</span> sentDate\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>kind <span class=\"token operator\">=</span> kind\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span><span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> sender<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> messageId<span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> sentDate<span class=\"token punctuation\">,</span> kind<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SenderType</span><span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImage</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> mediaItem <span class=\"token operator\">=</span> <span class=\"token function\">ImageMediaItem</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> sender<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> messageId<span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> sentDate<span class=\"token punctuation\">,</span> kind<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token function\">photo</span><span class=\"token punctuation\">(</span>mediaItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở MessageController ta cần implement những protocol sau:  MessagesDataSource, MessageCellDelegate, InputBarAccessoryViewDelegate, MessagesDisplayDelegate, MessagesLayoutDelegate, SlackInputBarDelegate, UIImagePickerControllerDelegate, UINavigationControllerDelegate.\nMessagesDataSource cung cấp những phương thức để truyền data vào cho các Cell. Ví dụ như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARK: - MessagesDataSource</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">currentSender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">SenderType</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> currentUser\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">messageForItem</span><span class=\"token punctuation\">(</span>at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> messagesCollectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessagesCollectionView</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">MessageType</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> messageList<span class=\"token punctuation\">[</span>indexPath<span class=\"token punctuation\">.</span>section<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">numberOfSections</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> messagesCollectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessagesCollectionView</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Int</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>MessagesDisplayDelegate cung cấp những phương thức để custom hiển thị của một Cell. Ví dụ như sau, ta custom việc hiển thị của AvatarView:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARK: - MessagesDisplayDelegate</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">configureAvatarView</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> avatarView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">AvatarView</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span> message<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessageType</span><span class=\"token punctuation\">,</span> at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> messagesCollectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MessagesCollectionView</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> message<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>senderId <span class=\"token operator\">==</span> <span class=\"token function\">currentSender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>senderId <span class=\"token punctuation\">{</span>\n        avatarView<span class=\"token punctuation\">.</span>isHidden <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        avatarView<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>red\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>InputBarAccessoryViewDelegate cung cấp những phương thức cho việc xử lý các tương tác của người dùng với MessageInputBar như tap send button, ... Dưới đây là việc xử lý gửi một tin nhắn do người dùng nhập từ bàn phím và bấm vào nút Send.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARK: - InputBarAccessoryViewDelegate</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">inputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> inputBar<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarAccessoryView</span><span class=\"token punctuation\">,</span> didPressSendButtonWith text<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">processInputBar</span><span class=\"token punctuation\">(</span>slackInputBar<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">processInputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> inputBar<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarAccessoryView</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Here we can parse for which substrings were autocompleted</span>\n    <span class=\"token keyword\">let</span> attributedText <span class=\"token operator\">=</span> inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>attributedText<span class=\"token operator\">!</span>\n    <span class=\"token keyword\">let</span> range <span class=\"token operator\">=</span> <span class=\"token function\">NSRange</span><span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">:</span> attributedText<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n    attributedText<span class=\"token punctuation\">.</span><span class=\"token function\">enumerateAttribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>autocompleted<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> range<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">_</span><span class=\"token punctuation\">,</span> range<span class=\"token punctuation\">,</span> <span class=\"token number\">_</span> <span class=\"token keyword\">in</span>\n\n        <span class=\"token keyword\">let</span> substring <span class=\"token operator\">=</span> attributedText<span class=\"token punctuation\">.</span><span class=\"token function\">attributedSubstring</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">:</span> range<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> substring<span class=\"token punctuation\">.</span><span class=\"token function\">attribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>autocompletedContext<span class=\"token punctuation\">,</span> at<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> effectiveRange<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Autocompleted: `\"</span><span class=\"token punctuation\">,</span> substring<span class=\"token punctuation\">,</span> <span class=\"token string\">\"` with context: \"</span><span class=\"token punctuation\">,</span> context <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">let</span> components <span class=\"token operator\">=</span> inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>components\n    inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    inputBar<span class=\"token punctuation\">.</span><span class=\"token function\">invalidatePlugins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Send button activity animation</span>\n    inputBar<span class=\"token punctuation\">.</span>sendButton<span class=\"token punctuation\">.</span><span class=\"token function\">startAnimating</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>placeholder <span class=\"token operator\">=</span> <span class=\"token string\">\"Sending...\"</span>\n    <span class=\"token comment\">// Resign first responder for iPad split view</span>\n    inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span><span class=\"token function\">resignFirstResponder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">DispatchQueue</span><span class=\"token punctuation\">.</span><span class=\"token function\">global</span><span class=\"token punctuation\">(</span>qos<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>async <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// fake send request task</span>\n        <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">DispatchQueue</span><span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>async <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">in</span>\n            inputBar<span class=\"token punctuation\">.</span>sendButton<span class=\"token punctuation\">.</span><span class=\"token function\">stopAnimating</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            inputBar<span class=\"token punctuation\">.</span>inputTextView<span class=\"token punctuation\">.</span>placeholder <span class=\"token operator\">=</span> <span class=\"token string\">\"Aa\"</span>\n            <span class=\"token keyword\">self</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">insertMessages</span><span class=\"token punctuation\">(</span>components<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">self</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">scrollToLastItem</span><span class=\"token punctuation\">(</span>animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">insertMessages</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Any</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> object <span class=\"token keyword\">in</span> data <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> text <span class=\"token operator\">=</span> object <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">String</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> message <span class=\"token operator\">=</span> <span class=\"token function\">Message</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> currentUser<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">:</span> text<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">insertMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> image <span class=\"token operator\">=</span> object <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">UIImage</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> message <span class=\"token operator\">=</span> <span class=\"token function\">Message</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> currentUser<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">insertMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">insertMessage</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> message<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Message</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    messageList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Reload last section to update header/footer labels and insert a new one</span>\n    messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">performBatchUpdates</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">insertSections</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">>=</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">{</span>\n            messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">reloadSections</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> <span class=\"token number\">_</span> <span class=\"token keyword\">in</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">self</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">isLastSectionVisible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">self</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>messagesCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">scrollToLastItem</span><span class=\"token punctuation\">(</span>animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">isLastSectionVisible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Bool</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">guard</span> <span class=\"token operator\">!</span>messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">isEmpty</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">let</span> lastIndexPath <span class=\"token operator\">=</span> <span class=\"token function\">IndexPath</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> section<span class=\"token punctuation\">:</span> messageList<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> messagesCollectionView<span class=\"token punctuation\">.</span>indexPathsForVisibleItems<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>lastIndexPath<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Để gửi một tin nhắn thì ta cần xác định được model Message là gì, rồi add vào array messageList và reload collectionView, MessageKit sẽ tự làm những việc còn lại.\nSlackInputBarDelegate cung cấp hai func cho việc xử lý việc user tap và nút camera và nút show library.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARK: - SlackInputBarDelegate</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">slackInputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> view<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBar</span><span class=\"token punctuation\">,</span> didTapCameraButton button<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarButtonItem</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Show camera\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">slackinputBar</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> view<span class=\"token punctuation\">:</span> <span class=\"token builtin\">SlackInputBar</span><span class=\"token punctuation\">,</span> didTapLibraryButton button<span class=\"token punctuation\">:</span> <span class=\"token builtin\">InputBarButtonItem</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> pickerVC <span class=\"token operator\">=</span> <span class=\"token function\">UIImagePickerController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    pickerVC<span class=\"token punctuation\">.</span>sourceType <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>photoLibrary\n    pickerVC<span class=\"token punctuation\">.</span>modalPresentationStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>fullScreen\n    pickerVC<span class=\"token punctuation\">.</span>delegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n    pickerVC<span class=\"token punctuation\">.</span>allowsEditing <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    viewController<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">present</span><span class=\"token punctuation\">(</span>pickerVC<span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi user chọn ảnh ở Photo library xong thì chỉ cần tạo một message và insert vào là xong.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token comment\">// MARKL - UIImagePickerControllerDelegate</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">imagePickerControllerDidCancel</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> picker<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImagePickerController</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    picker<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span>animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">imagePickerController</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> picker<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIImagePickerController</span><span class=\"token punctuation\">,</span> didFinishPickingMediaWithInfo info<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UIImagePickerController</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">InfoKey</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">Any</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> image <span class=\"token operator\">=</span> info<span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span>editedImage<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">UIImage</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n    picker<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span>animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">weak</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">in</span>\n        <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> <span class=\"token keyword\">self</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">let</span> message <span class=\"token operator\">=</span> <span class=\"token function\">Message</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>currentUser<span class=\"token punctuation\">,</span> messageId<span class=\"token punctuation\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sentDate<span class=\"token punctuation\">:</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">:</span> image<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">insertMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Xong xuôi, app của mình hiện giờ đã có thể gửi text và gửi ảnh như đây:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 634px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6fc333b23d0f0c42852b803958290b16/14369/result.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 202.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRsAAAABXRUJQVlA4ILQAAAAwBgCdASoUACgAPslWpUunpSOhsBqqqPAZCWMAuMjSR/iCnEMgl7LycQeoDURNnqsWKU8VDFjYqQQAAP5BN9O3C6e54rC4A6eD0f73Ha/ffoiZAFXdfAE0ps+iRglrqtLvNvTp/CfBE31Fx27noG3gtSJAkyLoBBJAIO/FTZcTmTMxYaY8QPmJD3Hgp2P95SjbDGfXtDFNJFrQ53pVp4q37zvgsUdlEdO9tD+Cz+U/pNkAAAA='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Kết quả\"\n        title=\"Kết quả\"\n        src=\"/static/6fc333b23d0f0c42852b803958290b16/14369/result.webp\"\n        srcset=\"/static/6fc333b23d0f0c42852b803958290b16/c54d4/result.webp 175w,\n/static/6fc333b23d0f0c42852b803958290b16/a3432/result.webp 350w,\n/static/6fc333b23d0f0c42852b803958290b16/14369/result.webp 634w\"\n        sizes=\"(max-width: 634px) 100vw, 634px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nTrên đây là một số hiểu biết của mình về MessageKit, mọi người nếu có ý kiến gì có thể comment ở phía dưới. Cảm ơn và hẹn gặp lại.\nHappy Reading!!!\n[[author | Manh Hung Nguyen. ]]</p>","id":"327cf7c5-76e0-5624-a407-bf0dd191ef8f","frontmatter":{"title":"MessageKit in iOS","date":"07-03-2021","tags":["ios","swift"]},"fields":{"slug":"/tim-hieu-messagekit/","readingTime":{"text":"10 min read"}}}},{"node":{"excerpt":"Đối với công việc lâp trình phần mềm thì Unit Test và UI Test là những việc vô cùng quan trọng trong việc bảo đảm 1 phần mềm đạt chất lượng tốt. Bài viết này, mình chỉ tập trung chủ yếu vào UI Test.…","snippet":"<div class=\"custom-block-body\"><p>&#x110;&#x1ED1;i v&#x1EDB;i c&#xF4;ng vi&#x1EC7;c l&#xE2;p tr&#xEC;nh ph&#x1EA7;n m&#x1EC1;m th&#xEC; Unit Test v&#xE0; UI Test l&#xE0; nh&#x1EEF;ng vi&#x1EC7;c v&#xF4; c&#xF9;ng quan tr&#x1ECD;ng trong vi&#x1EC7;c b&#x1EA3;o &#x111;&#x1EA3;m 1 ph&#x1EA7;n m&#x1EC1;m &#x111;&#x1EA1;t ch&#x1EA5;t l&#x1B0;&#x1EE3;ng t&#x1ED1;t. B&#xE0;i vi&#x1EBF;t n&#xE0;y, m&#xEC;nh ch&#x1EC9; t&#x1EAD;p trung ch&#x1EE7; y&#x1EBF;u v&#xE0;o UI Test. V&#x1EDB;i l&#x1EAD;p tr&#xEC;nh vi&#xEA;n iOS th&#xEC; vi&#x1EC7;c vi&#x1EBF;t UI Test &#x111;&#xE3; c&#xF3; s&#x1EF1; support t&#x1EEB; Apple v&#x1EDB;i XCTest framework. Nh&#x1B0;ng sau khi l&#xE0;m th&#x1EED; v&#x1EDB;i XCTest framework th&#xEC; th&#x1EA5;y n&#xF3; kh&#xF3; cho vi&#x1EC7;c vi&#x1EBF;t UITest cho ch&#xFA;ng ta. N&#xEA;n m&#xEC;nh &#x111;&#xE3; t&#xEC;m hi&#x1EC3;u &#x111;&#x1B0;&#x1EE3;c 1 framework cho vi&#x1EC7;c vi&#x1EBF;t UITest l&#xE0;  <strong>KIF framewok</strong></p></div>","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Đối với công việc lâp trình phần mềm thì Unit Test và UI Test là những việc vô cùng quan trọng trong việc bảo đảm 1 phần mềm đạt chất lượng tốt. Bài viết này, mình chỉ tập trung chủ yếu vào UI Test. Với lập trình viên iOS thì việc viết UI Test đã có sự support từ Apple với XCTest framework. Nhưng sau khi làm thử với XCTest framework thì thấy nó khó cho việc viết UITest cho chúng ta. Nên mình đã tìm hiểu được 1 framework cho việc viết UITest là  <a href=\"https://github.com/kif-framework/KIF\"><strong>KIF framewok</strong></a></p></div></div>\n<h1>1.Cài đặt KIF</h1>\n<p>Điều đầu tiên, để sử dụng được KIF thì chúng ta cần tạo target cho việc test của chúng ta. Ở đây, KIF không sử dụng <strong>iOS UI Testing Bundle</strong> mà sử dụng <strong>iOS Unit Testing Bundle</strong>.Nên trong trường hợp bạn nào đã có unit test ở trong project thì cần chọn 1 trong 2 target để chạy test.</p>\n<p>Chọn dự án của bạn trong Xcode và nhấp vào \"Add Target\" ở góc dưới bên trái của trình soạn thảo. Chọn iOS -> Test -> iOS Unit Testing Bundle. Hãy cung cấp cho nó một tên như \"Acceptance Tests\", \"UI Tests\", hoặc cái gì đó cho thấy ý định của quá trình test của bạn.</p>\n<p>Acceptance Test Target của bạn được tạo và sẽ có thêm 1 file đi cùng với nó, ex: \"Acceptance_Tests.swift\" khớp với tên target. Hãy xoá nó đi.</p>\n<h2>1.Cài đặt với Pod</h2>\n<p>Khi Test Target của bạn đã được thiết lập, thêm đoạn mã dưới đây vào Podfile của bạn. Sử dụng đúng target cần cài đặt KIF</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">target &#39;Your Apps&#39; do\n  ...\nend\n\ntarget &#39;Acceptance Tests&#39; do\n  pod &#39;KIF&#39;, :configurations =&gt; [&#39;Debug&#39;]\nend</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi chạy <code class=\"language-text\">pod install</code>  thì công việc tiếp theo là làm theo <strong>Cấu hình Test Target</strong> ở bên dưới để cấu hình thích hợp cho nó</p>\n<h2>2. Cài với static library</h2>\n<p>Để cài đặt KIF, bạn cần liên kết static library libKIF trực tiếp vào ứng dụng của bạn. Tải xuống nguồn từ  <a href=\"https://github.com/kif-framework/KIF\">KIF</a> và làm theo hướng dẫn dưới đây. </p>\n<p>Chúng tôi sẽ sử dụng một dự án đơn giản làm ví dụ và bạn có thể tìm thấy nó trong Documentation/Examples/Testable Swift trong reposity của KIF.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/acc162cd79581ba201717feab6906ba2/d4c13/9eca4dad-fa29-4526-a06e-27332230fbf3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVklEQVQoz6WSS0/bQBDHrfZM1UvPPbqXfoC036oV5sJ3gIhXDwhxbA+kgkb0ULUn1DQJDgFCEkrATsjDCfEj8XO965mODT1wq9SRfpqx1jsz/9mRvn74uHDZKL27vr1Z6ne7i432lXJ9oym63lVa7bbSajaU09O60m63lIuLC2U4HCnGsKt0fjeV5qWm9G4Hi3rfWOp0rt7/+P7thbSysStrvVu0LBOTJEFBBEGAlj1DL4gQIcaYMQQQyGOOqQnBMY5j5FzgXxM8xOKXz2+k/Oa2rGsdv1opC03TY9u2uW1Nua5d8yAI0wyP4JRNZCQ8ScgHdiwCT4RRFBWLxZy0tbEh6z2dlUolPD8/h8FgCIxFMBxPwTDGQF3fAwA8YhDO5hCEIZCKjNGgD77nouu6/ODgICdt73ySR/02q58cI80N6IDa52je3aFhGCRPZKNIgGRFAUbOFBNqlaoQkLYMqWTGGD88PMxJm1s78sToMmM0QMeZgev7yHwX53cGhhGjm5AlpABdP8b+ZJ7NkyTfF0qSLCEpvk+4uroiz12XceoqJCm+5wHFkGV44OESjSIGx57DbDZ7RKrKNE1eKBRyUj6flx3HCX3fB8/zBR0KekFBI6MHTzJPBQR1IDzPE6ZlCsuyBD2emE6nYjwepz6ZTCZsb28vJ62vr79KV+BfLZVJRTJSVemKpeuT+v39/bfS8vLyy0ql8rNarZ6QHatktVpNpSVWG42G2mw21Xq9nn23Wi317OxMLZfLKv2fnRPHFNeOjo5+ra2tvZbInhALxPP/5Bnx9A8ZtsgQeFrDrAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"9eca4dad-fa29-4526-a06e-27332230fbf3.png\"\n        title=\"9eca4dad-fa29-4526-a06e-27332230fbf3.png\"\n        src=\"/static/acc162cd79581ba201717feab6906ba2/8c557/9eca4dad-fa29-4526-a06e-27332230fbf3.png\"\n        srcset=\"/static/acc162cd79581ba201717feab6906ba2/4edbd/9eca4dad-fa29-4526-a06e-27332230fbf3.png 175w,\n/static/acc162cd79581ba201717feab6906ba2/13ae7/9eca4dad-fa29-4526-a06e-27332230fbf3.png 350w,\n/static/acc162cd79581ba201717feab6906ba2/8c557/9eca4dad-fa29-4526-a06e-27332230fbf3.png 700w,\n/static/acc162cd79581ba201717feab6906ba2/d4c13/9eca4dad-fa29-4526-a06e-27332230fbf3.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>1. Thêm KIF vào dự án</h3>\n<p>Bước đầu tiên là thêm dự án KIF vào thư mục con của ./Frameworks/KIF của dự án. Nếu dự án của bạn sử dụng Git để kiểm soát phiên bản, bạn có thể sử dụng submodules để cập nhật trong tương lai dễ dàng hơn:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cd /path/to/MyApplicationSource\nmkdir Frameworks\ngit submodule add https://github.com/kif-framework/KIF.git Frameworks/KIF</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nếu bạn không sử dụng Git, chỉ cần tải về mã nguồn và sao chép nó vào thư mục ./Frameworks/KIF</p>\n<h3>2. Thêm KIF vào Workspace</h3>\n<p>Hãy để dự án của bạn biết về KIF bằng cách thêm dự án KIF vào không gian làm việc cùng với dự án chính của bạn. Tìm KIF.xcodeproj trong Finder và kéo nó vào Project Navigator (⌘1).\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22a4193d4adf67c65dbae646f1980f53/d4c13/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVUlEQVQoz6VSTW/TQBC14FzEhTNHc+EHBP4VqO6l/6EVaRGih4LEgUuDWqJyQHCqgKR1mlZpnNA0jvPhOl92nMTrj92dYeyWQ29IjPQ0a633zXszo3x583GlWfv5ot1rr/W71mqtcaldtU2t07E0o9HQjHpNOzurao2GoV1cXGi2fa05tqW1fte1etPUur3BaqfvrLValy+/f/v6SNnYfqe2uz2cTscohUQhJbKAoev5uGQRIiSYxDECCOQJxzSE4JgkCXIu8G8IHmLx86dnyub2jmp1roLqaUVY3W7ieTPuuRPeMa84Y2HKcAec2EQGyaWkzLxEsKUIoygqFos5ZSu/pXZ7Vnx+fo7NZhNs24Y4jsEeTsBxhiClvAEA8CiG0J8DC0NgjGW4HvQhWC5wsVjwg4ODnLK7+0HtD8y4XC6haZoQBAHJ5zgdj9FxHLInkAhRAtmKGEazCUqSSlUIkEqG1DKJ4IeHhznl7c571SbCZsNAy7LAm/mYBAucjx0Mo5heQkZIB1wECfZH86yfZPmmkJQZITm+IXyVf6167jhmLEirpAoh4RwyhlvcPqJWJDDz5uD7/h2QXRrqlBcKhZyyubmh+v48TPuxXC4FXQqaoKCW0cBlljn5IgUivZ+6U+G6rvA8T0wmEzEcDtMsR6NRvLe3R0PZ2n6SrsC/RmqTimSgQkhCsvVJ8/7+/nNlfX39cblc/nF8fHxKcaJTVCoVnZZYr9Vqer1e16vVavZtGIZO26CXSiWd/s/uCSd0rhwdHf3K5/NPFYp7hBXCw//EA8L9P/FSx+DhBe/hAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png\"\n        title=\"758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png\"\n        src=\"/static/22a4193d4adf67c65dbae646f1980f53/8c557/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png\"\n        srcset=\"/static/22a4193d4adf67c65dbae646f1980f53/4edbd/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png 175w,\n/static/22a4193d4adf67c65dbae646f1980f53/13ae7/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png 350w,\n/static/22a4193d4adf67c65dbae646f1980f53/8c557/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png 700w,\n/static/22a4193d4adf67c65dbae646f1980f53/d4c13/758ee1d5-4d3e-4c9d-b477-e44c4c51a874.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>3. Cấu hình Test Target</h2>\n<p>Bây giờ, bạn đã có test target cho việc viết UI Test của bạn. Tiếp theo là thêm các thư viện cần thiết cho dự án, chúng ta chọn trong <strong>Project Navigator</strong> và vào Test Target mà bạn đã tạo ra, chọn tab <strong>\"Build Phases\"</strong>. Trong phần <strong>\"Link Binary With Libraries\"</strong>, hãy nhấn nút \"+\". Trong bảng xuất hiện, chọn \"libKIF.a\" và nhấp vào <strong>\"Add\"</strong>. Lặp lại quá trình cho <strong>CoreGraphics.framework</strong> và <strong>QuartzCore.framework</strong>\n.\nKIF yêu cầu IOKit.framework, nhưng nó không nằm trong các khuôn khổ hệ thống. Để liên kết đến nó, thêm \"-framework IOKit\" vào <strong>\"Other Linker Flags\"</strong>.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df28afeb1cc5dfa5d6ab63eec563f91f/d4c13/4221ceba-9604-497b-a1d0-142ffae2dd12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACEElEQVQoz6VSTW/TQBC14FzEhTNHc+EHBP4VqNtLzpwQVLSAEDESPSMhIZJUqeBSgSBpQESxEzuJ09gQK7Hz4XzY3o/sMuuQUjiUA096mt31zNuZt1aOcq+2bLNyx/GcnUG/v23ZPdSxbWRaFtINA1kQG40GarVaqNNpIz8YoXDsIbfXQbYD8Ye3ffp9sNNut+6+f3d0Tbl3/6n6TTdEr9cVk8lEBMFIRHEiJGJMxHlwzv/YM8Z+r0ks3r55fUt5sPdMtczG8sPxMTNNiwwHA+oNxzQMZxTyaJIkNPADGgQBncHZarWilHEgo4RgScL5imGMk3w+n1Fe5DQ1GA1xrVYTXbvLF4sF9/p97jgOn06mUElkW3w8CvjQ9/lsNuOEEA7CZ5SdgyAtHh6CoHaguq6Ny+XPwrZtPp/PBXSVjkMpTQnJIonjs738BkIbpj6kgsViRnmee6l6/S42mw3w0eHSR1m0QRRFcN4TruuKaRimPp7nRlBaUygUMsqjvSfqZOzjKFrKW/hyuUxHWr/BGnKNwQqWJH+PyuM45vJSqFl3uLv7UIUHiOFQ+sdgZAYfGeQyKGISMoL78Aw03UM3DPLT+AsrWONUcH//8Q0QEBdh49u/UCqVbivZbPZ6uVz+WKlUvgJOqgB48Wq9Xq/qul6Fn7rabDYv4olpml8Mw/ikadpNBXAJuAW8+p+8Arz8E5UNzBsnpCDsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4221ceba-9604-497b-a1d0-142ffae2dd12.png\"\n        title=\"4221ceba-9604-497b-a1d0-142ffae2dd12.png\"\n        src=\"/static/df28afeb1cc5dfa5d6ab63eec563f91f/8c557/4221ceba-9604-497b-a1d0-142ffae2dd12.png\"\n        srcset=\"/static/df28afeb1cc5dfa5d6ab63eec563f91f/4edbd/4221ceba-9604-497b-a1d0-142ffae2dd12.png 175w,\n/static/df28afeb1cc5dfa5d6ab63eec563f91f/13ae7/4221ceba-9604-497b-a1d0-142ffae2dd12.png 350w,\n/static/df28afeb1cc5dfa5d6ab63eec563f91f/8c557/4221ceba-9604-497b-a1d0-142ffae2dd12.png 700w,\n/static/df28afeb1cc5dfa5d6ab63eec563f91f/d4c13/4221ceba-9604-497b-a1d0-142ffae2dd12.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/666490879de23dcc8151ae8ef57a61ec/d4c13/4e69f5f5-626b-4bf7-a5b2-73056022a340.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACRklEQVQoz6VSy27TQBS1YF3EhjVLs+EDAn8FqrvJlm2paEGqaJDgB7qAPBQJAapAkKTkVRJPHg6OGzt2Hs7Dj9gznuHOpIUNrDjS0bVnrs6dc2ak7Omnne6g8ch0RnuOZe0iTVf6mqZ0u12l3++J2m63lV6vpyCkKuOxrSxmlmLofUU3LMV2JruXlrNnGMPHHz+8vyM92T+W6z9aTNcHzHVdNp1OWRBuGEcYhoLr9ZptNts1juSqEkL+rOENe/f29IG0f3gsd1HL/3x2RhDqxLZtY8uZ47nrYsce4dHIxIvFAi+XS+x5Hl6tVtgPQkySBMdRhKMoimmSEBi4yWazKenVSUaezpyo0WiwgTagvu/TS8OgnU6H/tTaFCFETdOkjuPQ8XgsGEAPR5IkggAGwrhQKIBg5o1sGFpUKn1jmqbRrb2QBUHIJqbKel2VDYcG/AfCPgwU31wExDgpt8wF8/l8Snp58lq2zEGE1DbkOKQ8R0IwA0/M0uusXq0wVUUMLEO2kKfnCWEOLgo5CkFwjHO5XEp6dvhCdueTKAh8PkVYxjimMSZ0PKzTi2aVqmqHQnY0DAOw6131YEEuyIXjON6e8ODgqbxcrkKwQSF0ApYJbBLImtgjRJDaIqZpEbHn+WS28AhckugDYcIBthM4YSQEj46e3wMB9jdAD8P4+mlQtgwS1rDZP1EsFh9K6XT6bqlU+lIul6uAyjkAblywVquJ2mw2f/MC2Gq1zlVVvWYFXsJ3WPuayWTuS4AbwB3g7f/kLeDNX/f6xGe6LhMwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4e69f5f5-626b-4bf7-a5b2-73056022a340.png\"\n        title=\"4e69f5f5-626b-4bf7-a5b2-73056022a340.png\"\n        src=\"/static/666490879de23dcc8151ae8ef57a61ec/8c557/4e69f5f5-626b-4bf7-a5b2-73056022a340.png\"\n        srcset=\"/static/666490879de23dcc8151ae8ef57a61ec/4edbd/4e69f5f5-626b-4bf7-a5b2-73056022a340.png 175w,\n/static/666490879de23dcc8151ae8ef57a61ec/13ae7/4e69f5f5-626b-4bf7-a5b2-73056022a340.png 350w,\n/static/666490879de23dcc8151ae8ef57a61ec/8c557/4e69f5f5-626b-4bf7-a5b2-73056022a340.png 700w,\n/static/666490879de23dcc8151ae8ef57a61ec/d4c13/4e69f5f5-626b-4bf7-a5b2-73056022a340.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>KIF được viết bằng Objective C nên các bạn cần thêm <code class=\"language-text\">-ObjC</code> vào <strong>\"Other Linker Flags\"</strong> trong Build Settings của Test Target\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a0e10eabc04e01238fd959042b9d983/d4c13/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACcklEQVQoz5WTS2/TQBDHDfciQOLMMXwDBGc+AR8DcUCgupeeOSFAtIAQLRKcUSqB1B4qQKiBiqRW0jyaxEmcxEnjZ+LEjtePXe8wtlqJC0L8rZ9G3pmdnRmvhf2tjytKu/RQ1dQ1YzJZlZWh2FMUsS3LYuPkROx0ZLEjt8ReryeOBj1xatviwjHEsaqIiqqJ6niy2h/pa91u59HXL/vXhMdPXueOGycwHPbBcRyw7SmQIIRUQRRnNk4yAz6DM3HgnANlyfkCsDiAz592bgtPN97k5HbT/3FwwNptOTYNg2rmjLqeRzGOOguPdiYeJb5HaxNKF4TRhKF1XephTBgGMQlj5jjzcCefvyW829rO2VMzqlar0Ff63Pd9fjoe80ajwU3L4tOpzQ3D4LOZwwNCsLCEJ0nC4zjOLGMMVziEYUj39vYw4faH3GikRMXiL1AUheOpqROiKAJKKdiWDaZpguu62TsmyCAkgBBjMJaTiMF84cX5fP6m8HbrfU6b9KN2q4lzVHk6x3TjudThEI4rFdB1HZMQWC6XGbZlgOvY4ExN7ntz8N05FL5/uyO82HiVc2ZWRIifVpW1nLaTTR6xTIt3u12OVXKStcw5pTGvdHRe7M55Zbjk5cGS9ucAxfrgvvD8+bPcYuEGaTCezLBlhgkZ7svARKzVajHLsliSPkmS+ceWz2SdsI6OViORtgQoNwf3hM3NlzcwAP6mtP3g7Br9S4Z2+kBYX1+/XiwWf5ZKpTLqSELhF5fq9brUbDalQqEg7e7uSoeHhxJWmpH6ypXKca1Wr1ZTqrUK/gTdoyPproC6iKwgl/+TK39wFbmEXPgNxifGqhlsvTIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png\"\n        title=\"f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png\"\n        src=\"/static/3a0e10eabc04e01238fd959042b9d983/8c557/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png\"\n        srcset=\"/static/3a0e10eabc04e01238fd959042b9d983/4edbd/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png 175w,\n/static/3a0e10eabc04e01238fd959042b9d983/13ae7/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png 350w,\n/static/3a0e10eabc04e01238fd959042b9d983/8c557/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png 700w,\n/static/3a0e10eabc04e01238fd959042b9d983/d4c13/f5711a2b-6afb-44a9-a834-d0101ff2fe4c.png 825w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ở phần này mình chỉ giới thiệu về việc thêm KIF framework vào dự án của chúng. Ở phần sau mình sẽ demo về KIF framework</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Phương Võ </div><div class=\"custom-block-body\"></div></div>","id":"ae02ace7-060f-50cc-b36c-bc7cbe64eeaa","frontmatter":{"title":"Automation Test for iOS, part 1","date":"01-03-2021","tags":["ios"]},"fields":{"slug":"/automation_test_for_iOS_part_1/","readingTime":{"text":"4 min read"}}}},{"node":{"excerpt":"Chào cả nhà! Đầu tiên hình ảnh là gì:    Khái niệm về hình ảnh là những gì chúng ta thấy được thông qua thị giác, rồi sau đó chuyển về não giúp ta cảm nhận nhận hình ảnh đó một cách chân thực nhất, từ…","snippet":"<div class=\"custom-block-body\"><p>   Kh&#xE1;i ni&#x1EC7;m v&#x1EC1; h&#xEC;nh &#x1EA3;nh l&#xE0; nh&#x1EEF;ng g&#xEC; ch&#xFA;ng ta th&#x1EA5;y &#x111;&#x1B0;&#x1EE3;c th&#xF4;ng qua th&#x1ECB; gi&#xE1;c, r&#x1ED3;i sau &#x111;&#xF3; chuy&#x1EC3;n v&#x1EC1; n&#xE3;o gi&#xFA;p ta c&#x1EA3;m nh&#x1EAD;n nh&#x1EAD;n h&#xEC;nh &#x1EA3;nh &#x111;&#xF3; m&#x1ED9;t c&#xE1;ch ch&#xE2;n th&#x1EF1;c nh&#x1EA5;t, t&#x1EEB; &#x111;&#xF3; &#x111;&#x1B0;a ra nh&#x1EEF;ng ph&#x1EA3;n x&#x1EA1;,c&#x1EA3;m nh&#x1EAD;n v&#x1EC1; h&#xEC;nh &#x1EA3;nh m&#xE0; ta v&#x1EEB;a thu nh&#x1EAD;n.</p></div>","html":"<h2>Chào cả nhà!</h2>\n<p>Đầu tiên hình ảnh là gì:</p>\n<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>   Khái niệm về hình ảnh là những gì chúng ta thấy được thông qua thị giác, rồi sau đó chuyển về não giúp ta cảm nhận nhận hình ảnh đó một cách chân thực nhất, từ đó đưa ra những phản xạ,cảm nhận về hình ảnh mà ta vừa thu nhận.</p></div></div>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 88.125%; position: relative; height: 0; overflow: hidden; \" > <iframe src=\"https://giphy.com/embed/WJjLyXCVvro2I\" frameborder=\"0\" class=\"giphy-embed\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe><p><a href=\"https://giphy.com/gifs/WJjLyXCVvro2I\">via GIPHY</a></p> </div>\n<p>  Tiếp theo ta đến với chủ đề chính là điều chỉnh hình ảnh và cách tạo thư viện hổ trợ chọn hình ảnh từ thư viện của điện thoại <strong>iOS</strong></p>\n<h1>Chào mừng bạn đến với bài viết của mình!</h1>\n<h2>I. Về xử lý hình ảnh:</h2>\n<ul>\n<li>Khi mình tải một hình ảnh điều gì sẽ xảy ra nếu hình ảnh bạn đưa lên \"quá lớn\", tất nhiên hình ảnh của bạn sẽ bị giảm kích thước (độ phân giải) và được đưa lên mà bạn không biết rằng hình ảnh của mình đã bị thay đổi kích thước (độ phân giải) vì sao lại có vấn đề này xảy ra?</li>\n<li>Xử lý hình ảnh giảm kích thước ban đầu của nó, không phải tất cả nhưng hầu hết các ứng dụng hay các trang mạng xã hội, ... đều phải xử lý kích thước hình ảnh gửi lên. Tại sao phải giảm kích thước nó đi, nó đâu có ảnh hưởng gì? hình ảnh sẽ bị giảm phân giải đi nếu bị giảm kích thước trông nó sẽ thế nào?</li>\n<li>Và nếu khi <strong>Upload</strong> ảnh nén lại vậy, khi <strong>load</strong> ra sẽ không còn chuẩn như ảnh gốc, vậy người dùng sẽ nghỉ thế nào khi ảnh của họ bị thay đổi?</li>\n<li>\n<p>Đầu tiên mình sẽ chia sẽ một chút hiểu biết của mình về vấn đề xử lý hình ảnh:</p>\n<ul>\n<li>Xử lý hình ảnh là việc chọn lọc những thông tin mong muốn từ những bức ảnh chụp từ máy ảnh hay máy <strong>Scan</strong>, để chọn lọc những thông tin mong muốn được chứa trong bức ảnh, phương pháp cơ bản được dùng trong xử lý hình ảnh là loại bỏ những phần thông tin ảnh không mong muốn.</li>\n<li>Xử lý hình ảnh hay ở đây là tối giản lại kích thước hình ảnh cho phù hợp với nhu câu sử dụng hình ảnh, để đảm bảo ảnh được tải lên lưu trữ và hiển thị tốt nhất (túm gọn lại là hình ảnh có độ phân giải quá lớn sẽ cần phải giảm kích thước lại cho phù hợp với nhu cầu lưu trữ hay hiển thị để đảm bảo tốc độ tải lên củng như tải xuống), ví dụ như bạn thích góc phải của hình ảnh gốc thì bạn cắt hình ảnh mới từ góc phải của ảnh gốc để lấy hình ảnh bạn yêu thích.</li>\n<li>Chất lượng hình ảnh thì sẽ ra sao khi bị nén lại, tất nhiên nó vẫn xem được với đúng kích thước bạn đã <strong>Resize</strong> theo <strong>Pixel</strong> của hình ảnh, hay chính là kích thước <strong>Width</strong> x <strong>Height</strong> nó sẽ hiển thị ra theo màn hình bạn tỉ lệ đó, và với kích thước được điều chỉnh đó ảnh bạn trông vẫn ổn, chỉ là bạn không thể phóng to hình ảnh ra như phim <strong>Bollywood</strong> thôi.</li>\n<li>Còn vấn đề xử lý hình ảnh chi tiết thì bạn nên tìm hiểu chuyên sâu về xử lý hình ảnh bằng chị Google có rất nhiều bài viết khá thú vị.</li>\n</ul>\n</li>\n<li>Đến với phần chính của bài viết nào!</li>\n</ul>\n<h2>II. iOS làm thế nào để tạo một ImagePicker?</h2>\n<ul>\n<li>Vì sao phải tạo <strong>ImagePickerView</strong> riêng mình mà không dùng <strong>UIImagePickerController</strong> ? Tốn thời gian nhiều để tạo một thư viện làm gì? Tất nhiên tốn thời gian hơn nhưng sẽ có lợi ích riêng, Nếu bạn đang sử dụng <strong>UIImagePickerController</strong> bạn thử chọn những hình ảnh có kích thước lớn hơn 20MB điều gì sẽ xảy ra nhỉ, không có hình ảnh nào được trả về, và không có thông báo gì vậy lỗi này là gì? bạn sẽ mất hàng giờ để tìm hiểu nguyên nhân và kết quả là vì hình ảnh quá lớn nên kết quả trả về là sự chấm dứt việc chọn hình ảnh(bạn chọn hình ảnh lớn trả về cùng kết quả với hành động từ chối ko chọn hình ảnh nữa). vậy điều này khiến bạn tìm đến thư viện hoặc trợ giúp từ Google vậy tại sao bạn không tự kiểm soát vấn đề của mình?</li>\n<li>\n<p>Mình giới thiệu cách mình xử lý trường hợp trên (tự tạo thư viện để sử dụng, nếu bạn thích thì cũng có thể từ đây tạo ra một thư viện chọn ảnh theo phong cách của bạn), các bước tạo thư viện cần thiết là:</p>\n<ol>\n<li>Lấy ảnh từ thư viện(request truy cập thư viện rồi lấy dữ liệu hình ảnh trong thư viện).</li>\n<li>Tạo giao diện show các hình ảnh đó (<strong>CollectionView</strong>, .... tuỳ khả năng design của bạn).</li>\n<li>Giảm kích thước hình ảnh (giảm data của hình ảnh).</li>\n<li>Trả về hình ảnh( lấy hình ảnh đã được chỉnh sữa hoặc data của hình ảnh).</li>\n</ol>\n</li>\n<li>\n<p><strong>Resource</strong> để làm các bước trên:</p>\n<ol>\n<li>\n<p>Tạo File cho thư viện <strong>PickerViewController</strong> và tất nhiên thư viện hổ trợ cho việc này là <strong>Photo</strong>:</p>\n<ul>\n<li>\n<p><strong>Photos</strong> là thư viện hổ trợ cho việc tương tác với thư viện như thêm và chỉnh sửa hổ trợ để lấy hình ảnh từ thư viện ảnh và một số tính năng khác.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">import Photos \n\nclass ImagePickerViewController: UIViewController, PHPhotoLibraryChangeObserver {\n    var assetArray: [PHAsset] = []\n    func getAllPhoto() {\n        PHPhotoLibrary.shared().register(self)\n        let status = PHPhotoLibrary.authorizationStatus()\n        let locationManager = CLLocationManager()\n        if status == .restricted || status == .denied {\n            locationManager.requestWhenInUseAuthorization()\n            return\n        }\n        DispatchQueue.global(qos: .userInteractive).async {\n            let allPhotosOptions = PHFetchOptions()\n            allPhotosOptions.sortDescriptors = [NSSortDescriptor(key: &quot;creationDate&quot;, ascending: false)]\n            allPhotosOptions.predicate = NSPredicate(format: &quot;mediaType == %d&quot;, PHAssetMediaType.image.rawValue)\n            assetArray = PHAsset.fetchAssets(with: allPhotosOptions)\n            DispatchQueue.main.async {\n                // here you reload view\n            }\n        }\n    }\n  }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>Tạo giao diện bạn mong muốn (ví dụ bạn tạo một <strong>CollectionView</strong> show toàn bộ hình ảnh lấy được từ thư viện ra, khi selected một hình ảnh thì chuyển sang màn hình chỉnh sửa cắt ,.... ). Và để lấy một ảnh thì từ <strong>PHAsset</strong> thì:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    getImage(asset: PHAsset)-&gt; UIImage {\n        let imageManager = PHImageManager.default()\n        let imageRequestOption = PHImageRequestOptions()\n        imageRequestOption.isSynchronous = true\n        imageRequestOption.resizeMode = .exact\n        imageRequestOption.deliveryMode = .opportunistic\n        imageManager.requestImage(for: asset, targetSize: CGSize(width: 200, height: 200), contentMode: .aspectFill, options:\n        imageRequestOption, resultHandler: {\n          (image, _) -&gt; Void in\n            // here your image (image)\n        })\n    }</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>imageRequestOption</strong> là thiết lập cho hình ảnh.</li>\n<li><strong>imageManager.requestImage</strong> là Func trả về một hình ảnh !</li>\n<li>\n<p><strong>imageManager.requestImageData</strong> ta có thể <strong>request data image</strong> thay vì <strong>request image</strong> nếu không muốn lấy <strong>image</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">imageManager.requestImageData(for: asset, options: imageRequestOption) { data, _, _, _ in\n  guard let data = data else { return }\n  DispatchQueue.main.async {\n    if let image = UIImage(data: data) {\n     //note: here your image (image)\n    }\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Xử lý hình ảnh khi ta có <strong>image</strong> rồi thì mọi việc dể dàng hơn chỉ cần gọi Func dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">public func jpegData(compressionQuality: CGFloat) -&gt; Data? // return image as JPEG. May return nil if image has no CGImageRef or invalid bitmap format. compression is 0(most)..1(least)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>\n<p>Cách gọi:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">guard let imageData = UIImage(data: dataImage)?.jpegData(compressionQuality: 0.5) else {return}\n// lay data được resize của hình ảnh\nlet imageResize = UIImage(data: imageData)\n// trả về một UIImage từ data</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Sau bước 3 ta đã có hình ảnh đã được chỉnh sửa kích thước, việc còn lại bạn trả về hình ảnh cho nơi gọi hàm.</p>\n<ul>\n<li>\n<p>Tới đây thì việc lấy ảnh từ thư viện và chỉnh sửa ảnh giảm kích thước hay không giảm thì tuỳ thuộc vào option của bạn. Hi vọng nó giúp được bạn ít nhiều. một vài <strong>Option</strong> để lấy hình ảnh mình có sử dụng là:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">public  func  requestPreviewImage(for asset: PHAsset, progressHandler: Photos.PHAssetImageProgressHandler?, resultHandler: @escaping (UIImage?, Data?, [AnyHashable: Any]?) -&gt; Void) -&gt; PHImageRequestID {\n  let option = PHImageRequestOptions()\n  option.isNetworkAccessAllowed = true\n  option.progressHandler = progressHandler\n  return requestImageData(for: asset, options: option) { (data,  _,  _, dictionry: Dictionary?) in\n    if let data = data, let image = UIImage(data: data, scale: 1) {\n      resultHandler(image, data, dictionry)\n    }\n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>Func này trả về một hình ảnh nguyên bản và data của nó.</li>\n<li>Tới đây thì có lẽ bạn đã biết được cách lấy hình ảnh từ thư viện hi vọng bạn có thể tạo được bộ source cho <strong>PickerImage</strong> theo ý mình.</li>\n<li>Các <strong>Option</strong> của bạn củng có thể dẫn đến tình trạng lỗi không chọn được hình ảnh nên nếu gặp vấn đề như vậy thì bạn chỉ cần kiểm tra lại ở các <strong>Option</strong> của bạn khi lấy hình ảnh là được (sửa hoặc thay thế <strong>Option</strong> để nhận kết quả mới).</li>\n<li>\n<p>Vậy thì còn lý do gì để bạn không dùng phương pháp này lỗi mình sửa được vẫn hơn trông cậy một ai đó giúp đỡ khi bạn bị task dí đít mà gặp bug?</p>\n<h2>Đến đây chắc hẳn bạn đã tạo được cho mình một <strong>ImagePicker</strong> cho chình mình rồi nhỉ, Cảm ơn Bạn đã đọc bài viết của mình!</h2>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Đặng Cao Trí </div><div class=\"custom-block-body\"></div></div>","id":"3e93a496-9ecb-5b59-90c8-24700aa53780","frontmatter":{"title":"Create library ImagePicker for IOS","date":"24-02-2021","tags":["ios","swift"]},"fields":{"slug":"/create-library-imagepicker-for-ios/","readingTime":{"text":"8 min read"}}}},{"node":{"excerpt":"SwiftUI Là Gì ?    SwiftUI là một UI Framework mới được phát triển bởi Apple. Nó cung cấp một API mới cho phép người dùng có thể viết Code mà nó có thể làm việc được trên tất cả các Apple platforms…","snippet":"<div class=\"custom-block-body\"><p>   <strong>SwiftUI</strong> l&#xE0; m&#x1ED9;t UI <strong>Framework</strong> m&#x1EDB;i &#x111;&#x1B0;&#x1EE3;c ph&#xE1;t tri&#x1EC3;n b&#x1EDF;i <strong>Apple</strong>. N&#xF3; cung c&#x1EA5;p m&#x1ED9;t API m&#x1EDB;i cho ph&#xE9;p ng&#x1B0;&#x1EDD;i d&#xF9;ng c&#xF3; th&#x1EC3; vi&#x1EBF;t Code m&#xE0; n&#xF3; c&#xF3; th&#x1EC3; l&#xE0;m vi&#x1EC7;c &#x111;&#x1B0;&#x1EE3;c tr&#xEA;n t&#x1EA5;t c&#x1EA3; c&#xE1;c <strong>Apple</strong> platforms: <strong>iOS, iPadOS, watchOS</strong> v&#xE0; <strong>tvOS</strong>!</p></div>","html":"<h1><strong>SwiftUI</strong> Là Gì ?</h1>\n<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>   <strong>SwiftUI</strong> là một UI <strong>Framework</strong> mới được phát triển bởi <strong>Apple</strong>. Nó cung cấp một API mới cho phép người dùng có thể viết Code mà nó có thể làm việc được trên tất cả các <strong>Apple</strong> platforms: <strong>iOS, iPadOS, watchOS</strong> và <strong>tvOS</strong>!</p></div></div>\n<h2>I. Giới Thiệu:</h2>\n<ol>\n<li>\n<p>Mở Đầu</p>\n<ul>\n<li><strong>SwiftUI</strong> là một UI <strong>Framework</strong> mới được phát triển bởi <strong>Apple</strong>. Nó cung cấp một API mới cho phép người dùng có thể viết Code và nó còn có thể làm việc được trên tất cả các <strong>Apple</strong> platforms: <strong>iOS, iPadOS, watchOS</strong> và <strong>tvOS</strong>!</li>\n<li>Mô hình này được ứng dụng từ trước <strong>iOS 13</strong> và bây giờ đang trở thành một xu hướng mới, nó đem lại sự đơn giản trong quá trình Code và tốc độ xây dựng ứng dụng hơn so với <strong>UIKit</strong>, mặc dù vẫn chưa đủ khả năng thay thế hoàn toàn được <strong>UIKit</strong> , nhưng chưa có gì là chắc chắn cả, giống như <strong>Swift</strong> ra đời cũng chưa thay thế được <strong>Objective - C</strong> chẳng hạn. Nếu so sánh <strong>SwiftUI</strong> với <strong>UIKit</strong> ở thời điểm hiện tại thì đang cách biệt lớn bởi vì vẫn chưa có nhiều những sự trợ giúp từ các trang nổi tiếng như <strong>Stackoverflow, Medium, Hackingswift, ...</strong> về những rắc rối hay những vấn đề phức tạp.</li>\n<li>Hiện tại <strong>SwiftUI</strong> đang được nhiều người lựa chọn sử dụng mặc dù vẫn đang trong quá trình nâng cấp và bổ xung, bởi vì họ tin vào <strong>SwiftUI</strong> sẽ phát triển mạnh mẽ trong tương lai, và có một điều rằng bạn có thể sử dụng đồng thời cả <strong>UIKit</strong> và <strong>SwiftUI</strong> trong một <strong>project</strong>, vậy nó nói lên rằng nếu bạn đã thông thạo <strong>UIKit</strong> thì có thêm một sự trợ gúp hoàn hảo khi sử dụng <strong>SwiftUI</strong>. Có thể nó sẽ là một <strong>Framework</strong> mạnh mẽ trong tương lai gần, tuy còn nhiều thiếu xót nhưng <strong>Apple</strong> đã và đang ngày một hoàn thiện cho nó. </li>\n</ul>\n</li>\n<li>\n<p>Yêu cầu để sử dụng:</p>\n<ul>\n<li>macOS Catalina và XCode 11 Beta trở lên để <strong>SwiftUI</strong> render <strong>Canvas</strong>(<strong>Simulator</strong>).</li>\n<li>Link: How To Install Catalina + XCode 11 Beta, research và làm theo, sau khi cài đặt xong thì chúng ta có thể bắt đầu vời <strong>SwiftUI</strong>.</li>\n</ul>\n</li>\n<li>\n<p>Bắt đầu với <strong>SwiftUI</strong>:</p>\n<ul>\n<li>Đầu tiên bắt đầu với khởi tạo một <strong>Project</strong> đơn giản:\n<img src=\"https://i.ibb.co/874rTgF/Screenshot-2021-02-03-at-15-15-58.png\"></li>\n<li>Giao diện làm việc thật thú vị, không cần khởi chạy mỗi lần cần kiểm tra UI vừa tạo trên <strong>simulator</strong> như <strong>UIKit</strong> , giao diện bên phải tự động cập nhật theo từng dòng Code chúng ta vừa nhập vào, không cần kéo thả những <strong>IBOutlet</strong> hay những lần conflic những <strong>.xib file</strong>, điều này thật khiến ta có trải nghiệm tuyệt vời. </li>\n<li>\n<p>Tiếp theo chúng ta nhìn xem cách nó tạo một <strong>TableView</strong> đơn giản với một Model như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">struct User {\n    var id = UUID()\n    var name: String\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>Khởi tạo một Data:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">let users: [User] = [User(name: &quot;hoang&quot;), User(name: &quot;linh&quot;), User(name: &quot;nhung&quot;), User(name: &quot;quang&quot;)]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Sau đó tạo một <strong>TableView</strong> bằng List:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">List(users, id:\\.id) { user in\n    Text(user.name)\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>Kết quả bên dưới:\n<img src=\"https://i.ibb.co/tbCGM1W/ezgif-com-gif-maker-4.gif\"></li>\n<li>Điều này so với giao diên làm việc trước đây(<strong>UIKit</strong>) có gì khác biệt không nhỉ, tạo một <strong>IBOutlet</strong> cho <strong>TableView</strong> sau đó phải gọi <strong>RegisterCell</strong> để đăng ký những <strong>Cell</strong> cho <strong>TableView</strong> rồi lại sử dụng <strong>Delegate, Datasoure</strong> Để liên kết Data cho chúng, rồi chúng ta vào <strong>Cell</strong> để tạo những <strong>IBOutlet</strong> cho các <strong>Cell</strong>, tiếp đó phải kéo các liên kết <strong>IBOutlet</strong> từ đó vào <strong>.xib file</strong> của <strong>Cell</strong> và phải đảm bảo được là chúng không thiếu xót hoặc nhầm lẫn, sau đó điều chỉnh <strong>Layout</strong>, ...  Khá là nhiều công đoạn để có thể tạo nên một <strong>TableView</strong> với cách làm trước đây, còn với <strong>SwiftUI</strong> bạn thấy rồi đấy.</li>\n<li>Còn rất nhiều những tiện ích, lợi ích mà <strong>SwiftUI</strong> có thể mang lại cho chúng ta nữa không chỉ có code ngắn gọn và sạch, bởi vì nó hoàn toàn mới mẻ nên sẽ khiến bạn còn bất ngờ hơn nhiều nếu bạn tìm hiểu thêm về nó.</li>\n</ul>\n</li>\n</ol>\n<h2>II. <strong>SwiftUI</strong> Có Gì?</h2>\n<ol>\n<li>\n<p>Cấu trúc của nó gồm:\n<img src=\"https://i.ibb.co/68BbdVm/Screenshot-2021-02-03-at-16-00-05.png\">\na. Đầu tiên chúng ta phải biết được cách nó hoạt động:</p>\n<ul>\n<li>\n<p><strong>AppDelegate</strong>:</p>\n<ul>\n<li>Ngay cả trong <strong>iOS 13</strong>, <strong>AppDelegate</strong> vẫn là điểm truy cập chính của một ứng dụng. Các phương thức <strong>AppDelegate</strong> này được cho là phải ở đó để xử lý các sự kiện trong vòng đời ứng dụng, tức là phản hồi ứng dụng đang được khởi chạy, chạy nền, nền trước, nhận dữ liệu, v.v.</li>\n<li>\n<p>Ở <strong>AppDelegate</strong>, những điều chúng ta thường viết mã ứng dụng cho <strong>iOS 12</strong> (trở xuống) là:</p>\n<ul>\n<li>Thiết lập trình điều khiển xem đầu tiên của ứng dụng (được gọi là trình điều khiển xem gốc), func (_: didFinishLaunchingWithOptions :) là func đầu tiên mà hệ điều hành gọi khi khởi chạy ứng dụng.</li>\n<li>Định cấu hình cài đặt ứng dụng và các thành phần khởi động. </li>\n<li>Đăng kí trình xử lý notification.</li>\n<li>Trả lời các sự kiện trong vòng đời của ứng dụng, chẳng hạn như ứng dụng chạy <strong>background</strong>, <strong>foreground</strong> hoặc thoát khỏi ứng dụng.</li>\n</ul>\n</li>\n<li>Nhưng bây giờ chúng ta không cần phải quá quan tâm ở <strong>AppDelegate</strong> nữa, bởi vì môi trường hoạt động chính của chúng ta ở <strong>SceneDelegate</strong>.</li>\n</ul>\n</li>\n<li>\n<p><strong>SceneDelegate</strong>:</p>\n<ul>\n<li>Từ <strong>iOS 13</strong> trở lên, <strong>SceneDelegate</strong> đảm nhận một số vai trò đại biểu của ứng dụng. Quan trọng nhất, khái niệm về <strong>UIWindow</strong>(cửa sổ) được thay thế bằng <strong>UIScene</strong>(bối cảnh). Một ứng dụng có thể có nhiều <strong>Scene</strong> và một <strong>Scene</strong> sẽ đóng vai trò làm nền cho giao diện và nội dung ứng dụng. Vì vậy, <strong>SceneDelegate</strong> chịu trách nhiệm về những gì được hiển thị trên màn hình trong thuật ngữ của giao diện người dùng và dữ liệu.</li>\n<li>Người dùng cũng có thể tạo một bản sao của một <strong>Scene</strong>, chạy hiệu quả nhiều phiên bản của một ứng dụng cùng một lúc.</li>\n<li>\n<p><strong>SceneDelegate</strong> những điều chúng ta cần biết là:</p>\n<ul>\n<li>Một dự án <strong>iOS</strong> mới hiện có lớp <strong>SceneDelegate</strong>, được tạo tự động, bao gồm các sự kiện vòng đời quen thuộc như hoạt động, ngắt kết nối, v.v.</li>\n<li>Class <strong>AppDelegate</strong> có 2 chức năng mới liên quan đến các phiên <strong>Scene</strong>, được gọi là application(<em>:configurationForConnecting:options:) và application(</em>:didDiscardSceneSessions:).</li>\n<li>Danh sách thuộc tính <strong>info.plist</strong> nhận bản khai <strong>Scene</strong> application(Application Scene Manifest), liệt kê các <strong>Scene</strong> là một phần của ứng dụng này, bao gồm tên <strong>class</strong>, <strong>delegate</strong> và <strong>Storyboard</strong> của chúng.</li>\n<li>Thiết lập trình điều khiển xem đầu tiên của ứng dụng (được gọi là trình điều khiển xem gốc), tương tự <strong>AppDelegate</strong> là (<em>: didFinishLaunchingWithOptions :) thì ở đây chúng ta có scene(</em>:willConnectTo:options:), là chức năng đầu tiên mà hệ điều hành gọi khi khởi chạy ứng dụng.</li>\n</ul>\n</li>\n<li>\n<p>Trong <strong>SceneDelegate</strong> còn có những chức năng sau:</p>\n<ul>\n<li>sceneDidDisconnect (_ :) được gọi khi một <strong>Scene</strong> bị ngắt kết nối khỏi ứng dụng (tắt app).</li>\n<li>sceneDidBecomeActive (_ :) được gọi khi người dùng bắt đầu tương tác với một <strong>Scene</strong>, tức là lúc quay trở lại App từ một ứng dụng khác hoặc lúc app xuất hiện lần đầu.</li>\n<li>sceneWillResignActive (_ :) được gọi khi người dùng ngừng tương tác với một <strong>Scene</strong>, tức là chuyển sang <strong>Scene</strong> khác.</li>\n<li>sceneWill EntryForeground (_ :) được gọi khi một <strong>Scene</strong> đi vào <strong>foreground</strong>, tức là bắt đầu hoặc tiếp tục từ trạng thái <strong>foreground</strong>.</li>\n<li>sceneDid EntryBackground (_ :) được gọi khi một <strong>Scene</strong> vào <strong>background</strong>, tức là ứng dụng được thu nhỏ nhưng vẫn đang chạy ở <strong>background</strong>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>b.   Bộ phận khác của <strong>SwiftUI</strong>:</p>\n<ul>\n<li><strong>Assets.xcassets</strong> đây chính là nơi chứa ảnh của <strong>Project</strong>. </li>\n<li><strong>LaunchScreen.xib</strong> thì chắc hẳn bạn đã biết nó là màn hình chờ khi khởi động App.</li>\n<li>\n<p>Trong giao diện <strong>ContenView</strong> ta thấy 2 thành phần gồm <strong>ContenView</strong> và <strong>ContentView_Previews</strong>:</p>\n<ul>\n<li><strong>ContenView</strong> chính là nơi ta tạo giao diện bằng Code của mình.</li>\n<li><strong>ContentView_Previews</strong> chính là thứ tạo nên sự đồng bộ trực tiếp giữa Code và Design.</li>\n<li>Tổ hợp phím Sau <strong>CMD+ALT+Enter</strong> để mở và đóng màn hình <strong>Preview</strong> và <strong>CMD+ALT+P</strong> để khởi chạy màn hình <strong>Preview</strong> nếu chúng ta muốn vừa Code vừa xem sự thay đổi UI vừa được thêm vào bằng Code một cách trực tiếp.</li>\n<li>Bên trong <strong>ContenView</strong> có biến <strong>body: some View</strong> đây chính là <strong>Scene</strong> chính của mỗi <strong>View</strong>, các thành phần bên trong của chúng đều phải tuân theo một <strong>Protocol</strong> chung là <strong>View</strong>, cũng chính là phần khiến ta khó làm quen nhất đối với <strong>SwiftUI</strong>.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Ưu điểm của <strong>SwiftUI</strong>:</p>\n<ul>\n<li>Đầu tiên nó đơn giản và dể học và Code của nó khá là gọn gàng dể đọc.</li>\n<li>Có thể trộn cả <strong>UIKit</strong> vào <strong>SwiftUI</strong> với nhau.</li>\n<li>Có thể dể dàng quản lý chủ đề cho App, có thể đặt làm mặc định chủ đề cho App.</li>\n<li>Cung cấp cơ chế hoạt động cho những người đam mê lập mô hình lập trình phản ứng, <strong>BindableObject</strong>, <strong>ObjectBinding</strong>, và <strong>Combine Framework</strong>.</li>\n<li>Cung cấp khung hình giao diện trực tiếp của <strong>design</strong> cho người dùng viết Code mà không cần phải khởi chạy <strong>Simulator</strong> hoặc <strong>Device</strong> để kiểm tra, xem lại kết quả như trước.</li>\n<li>Không còn <strong>InterfaceBuilder</strong>, nó được thay thế bởi <strong>Canvas</strong> khi bạn, Code sẽ được thêm tự động nếu bạn kéo vào màn hình <strong>Preview</strong>.</li>\n<li>Không còn phải gặp các sự cố crash App khi quên kéo <strong>IBOutlet</strong>.</li>\n<li>Không còn <strong>AutoLayout</strong> và các vấn đề liên quan đến nó, nó được thay thế bằng các bố cục <strong>VStack, ZStack, HStack, Groups, Lists</strong> và những thử khác. Nó Không có <strong>AutoLayout</strong> nên bố cục luôn cần được khởi tạo trước, bởi vì nó không sử dụng <strong>Storyboard</strong> nên nó tạo thuận lợi cho làm việc nhóm đối với quản lý Code. </li>\n</ul>\n</li>\n<li>\n<p>Nhược Điểm: </p>\n<ul>\n<li>Đi kèm với phiên bản hổ trợ là <strong>iOS13</strong> trở lên nên nó sẽ không hỗ trợ được cho các phiên bản <strong>iOS</strong> thấp hơn, điều này thì nếu xem các bảng thông kê sử dụng của <strong>Apple</strong> thì hiện tại bắt đầu làm quen cũng không phải quá sớm, vì hiện nay lượng người sử dụng <strong>iOS 13</strong> trở lên chiếm trên 80% vào tháng 6/2020 thì hiện tại không còn phải lo ngại về vấn đề này. </li>\n<li>Cùng với sự mới mẻ của <strong>SwiftUI</strong> thì chắc chắn nó chưa được nhiều sự trợ giúp từ các trang nổi tiếng như <strong>StackOverFlow</strong> về các vấn đề phức tạp. Hay là một số vấn đề mà <strong>Framework</strong> này chưa hổ trợ. Hoặc bạn có thể tự giải quyết vấn đề của mình và chia sẽ lên để góp phần xây dựng cộng đồng <strong>SwiftUI</strong> ngày một lớn mạnh.</li>\n<li>Không cho phép xem kiểm tra phân cấp <strong>ContentView_Previews</strong>.</li>\n</ul>\n</li>\n<li>\n<p>Đến với ví dụ một UI của một dự án dùng <strong>Framework</strong> <strong>SwiftUI</strong> hoặc <strong>UIKit</strong>:</p>\n<p>a. <strong>UIKit</strong>: </p>\n<ul>\n<li>Đầu tiên là tạo giao diện <strong>InterfaceBuilder</strong>:\n<img src=\"https://i.ibb.co/K7wLX9C/Screen-Shot-2021-02-05-at-16-43-36.png\"></li>\n<li>Tiếp theo là liên kết với <strong>Swift File</strong> như sau:\n<img src=\"https://i.ibb.co/p305kB1/Screen-Shot-2021-02-05-at-16-51-09.png\">\n<img src=\"https://i.ibb.co/0tXMr1N/Screen-Shot-2021-02-05-at-16-51-24.png\"></li>\n<li>Kéo <strong>IBOutlet</strong> cho <strong>View</strong>, liên kết <strong>.xib file</strong> với <strong>Class</strong> ,.....</li>\n<li>Sau mỗi lần chỉnh sửa giao diện ta đều phải khởi chạy để nhìn xem đã đúng mong muốn chưa.</li>\n<li>Nhìn qua để tạo một giao diện cho <strong>UIKit</strong> chúng ta phải trải qua nhiều công đoạn nhỉ.</li>\n</ul>\n<p>b. <strong>SwiftUI</strong>:</p>\n<ul>\n<li>Bắt đầu với một màn hình như sau:\n<img src=\"https://i.ibb.co/0rthy8v/Screenshot-2021-02-05-at-17-16-02.png\"></li>\n<li>Sau đó chúng ta viết Code điều chỉnh giao diện bên trong body và kết quả của giao diện được cập nhật trực tiếp ở <strong>Preview</strong> bên cạnh, mà không không phải lo lắng vấn đề quên kéo <strong>IBOutlet</strong> hay <strong>AutoLayout</strong>, chỉ cần viết Code và cân chỉnh vị trí cho các <strong>Scene</strong>.</li>\n<li>So với cách làm trước đây <strong>UIKit</strong> thì thực là một bước ngoặc lớn về sự đơn giản và tốc độ làm việc.</li>\n</ul>\n</li>\n</ol>\n<h2>III. Tổng Kết.</h2>\n<ul>\n<li>Bài viết này giới thiệu về <strong>SwiftUI</strong>.</li>\n<li>Là một <strong>Framework</strong> mới, thời gian tới sẽ là sự khởi đầu cho <strong>Framework</strong> này, với thống kê của <strong>Apple</strong> thì <strong>iOS13</strong> chiếm trên 80% vào tháng 6/2020 thì hiện tại không còn phải lo ngại về vấn đề này.</li>\n<li>Cộng động <strong>iOS</strong> ngày càng chia sẽ nhiều bài viết và đang dần có nhiều hơn các sự trợ giúp về các vấn đề khó hoặc <strong>SwiftUI</strong> chưa hỗ trợ. </li>\n<li>Hẹn gặp lại ở các bài viết sau, chúng ta cùng tìm hiểu thêm và sử dụng nó nhé!</li>\n</ul>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Tri Đặng </div><div class=\"custom-block-body\"></div></div>","id":"c7143574-7230-59ea-9f00-a0fb9afe8b76","frontmatter":{"title":"What is SwiftUI ?","date":"23-02-2021","tags":["ios","swift"]},"fields":{"slug":"/swiftui-la-gi/","readingTime":{"text":"11 min read"}}}},{"node":{"excerpt":"Chắc hẳn nhiều bạn làm mobile đều từng nghe đến khái niệm Deep link, App link, Universal link, Dynamic link, URL Scheme. Những khái niệm cũng như cách gọi tên đôi lúc cũng khiến bạn bối rối, khó hiểu…","snippet":"<div class=\"custom-block-body\"><p>Ch&#x1EAF;c h&#x1EB3;n nhi&#x1EC1;u b&#x1EA1;n l&#xE0;m mobile &#x111;&#x1EC1;u t&#x1EEB;ng nghe &#x111;&#x1EBF;n kh&#xE1;i ni&#x1EC7;m Deep link, App link, Universal link, Dynamic link, URL Scheme. Nh&#x1EEF;ng kh&#xE1;i ni&#x1EC7;m c&#x169;ng nh&#x1B0; c&#xE1;ch g&#x1ECD;i t&#xEA;n &#x111;&#xF4;i l&#xFA;c c&#x169;ng khi&#x1EBF;n b&#x1EA1;n b&#x1ED1;i r&#x1ED1;i, kh&#xF3; hi&#x1EC3;u, nh&#x1EA7;m l&#x1EAB;n. B&#xE0;i vi&#x1EBF;t n&#xE0;y s&#x1EBD; cung c&#x1EA5;p &#x111;&#x1EA7;y &#x111;&#x1EE7; cho b&#x1EA1;n c&#xE1;i nh&#xEC;n t&#x1ED5;ng quan v&#x1EC1; Deep link. </p></div>","html":"<div class=\"custom-block snippet\"><div class=\"custom-block-body\"><p>Chắc hẳn nhiều bạn làm mobile đều từng nghe đến khái niệm Deep link, App link, Universal link, Dynamic link, URL Scheme. Những khái niệm cũng như cách gọi tên đôi lúc cũng khiến bạn bối rối, khó hiểu, nhầm lẫn. Bài viết này sẽ cung cấp đầy đủ cho bạn cái nhìn tổng quan về Deep link. </p></div></div>\n<h2>1. Deep link</h2>\n<p>Giống như cấu trúc <code class=\"language-text\">http</code> và <code class=\"language-text\">https</code> để điều hướng user tới website thì Deep link là cấu trúc để điều hướng user đi tới một ứng dụng nào đó trên điện thoại. Deep link bao gồm 3 dạng chính: </p>\n<ul>\n<li>URL Scheme: sử dụng url scheme để mở app </li>\n<li>App link(Android) và Universal link (iOS): sử dụng địa chỉ web page để mở app</li>\n<li>Custom Deep link (Dynamic link, Repro, Adjust, branch.io): cũng sử dụng địa chỉ web page để mở app nhưng có thêm chức năng thu thập thống kê traffic từ link (thường là dịch vụ bên thứ 3 cung cấp)</li>\n</ul>\n<p>Deep link dùng để làm gì:</p>\n<ul>\n<li>Điều hướng qua lại giữa các app, từ website qua app</li>\n<li>Tạo các đường link trao đổi thông tin và thực hiện các chuyển flow trong app khi click vào link</li>\n<li>Thu thập dữ liệu, hành vi người dùng khi click vào link</li>\n</ul>\n<p>Dưới đấy mình sẽ đi vào chi tiết cách dùng cài đặt và chú ý khi sử dụng từng loại</p>\n<h2>2. URL Scheme</h2>\n<p>URL Scheme sẽ có dạng <code class=\"language-text\">yourSchemeApp://</code>. App sẽ được mở lên khi gõ và click đúng scheme này</p>\n<h3>Cài đặt</h3>\n<p>Cài đặt với iOS bạn cần cài đặt trong file <code class=\"language-text\">Info.plist</code>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/46e1fab862df96477c42f21d458e18a4/17d12/setup-ios-url-scheme.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.142857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAZklEQVQI142OSQqAMBAE/YfZzeLJNUpEXP7/qdYMiNccGqZmoKarZU1wvgXjElwomMa9HCCkRtcPaKxHzQTdSlId54207STIC+sCJfM0R/jwPysSjlMkwddCKkOc59z+OC9oY4ulD9EDVCl0ENvmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cài đặt url scheme iOS\"\n        title=\"cài đặt url scheme iOS\"\n        src=\"/static/46e1fab862df96477c42f21d458e18a4/8c557/setup-ios-url-scheme.png\"\n        srcset=\"/static/46e1fab862df96477c42f21d458e18a4/4edbd/setup-ios-url-scheme.png 175w,\n/static/46e1fab862df96477c42f21d458e18a4/13ae7/setup-ios-url-scheme.png 350w,\n/static/46e1fab862df96477c42f21d458e18a4/8c557/setup-ios-url-scheme.png 700w,\n/static/46e1fab862df96477c42f21d458e18a4/e996b/setup-ios-url-scheme.png 1050w,\n/static/46e1fab862df96477c42f21d458e18a4/2cefc/setup-ios-url-scheme.png 1400w,\n/static/46e1fab862df96477c42f21d458e18a4/17d12/setup-ios-url-scheme.png 1666w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Bạn có thể thử click hoặc gõ trực tiếp từ Safari để mở thử itunes bằng link sau <code class=\"language-text\">imst://</code> hoặc mở AppStore từ link  <code class=\"language-text\">itms-apps://</code></p>\n<p>Với Android URL Scheme chỉ thể dùng khi bạn click trực tiếp vào link. Bạn có thể thử click vào link sau để mở PlayStore tìm kiếm app gmail <code class=\"language-text\">market://search?q=gmail</code></p>\n<h3>Ưu điểm:</h3>\n<ul>\n<li>Dễ dàng cài đặt phía app</li>\n<li>Không cần cài đặt phía backend</li>\n</ul>\n<h3>Nhược điểm:</h3>\n<ul>\n<li>URL Scheme có thể trùng lặp các app nếu đặt đơn giản</li>\n<li>Không thể điều hướng khi app chưa cài </li>\n<li>Với iOS trước khi wake app luôn có popup confirm (trừ những app của hệ thống)</li>\n</ul>\n<h2>3. App link, Universal link</h2>\n<p>Khắc phục điểm yếu của của URL Scheme cả Apple và Google đã phát triển ra App link (Android 6.0) và Universal link (iOS 9.0) sử dụng địa chỉ domain web page làm Deep link wake app.</p>\n<p>Cơ chế của Deep link web page này sẽ check nếu trong các app đã cài đặt có config web page trùng với Deep link thì sẽ điều hướng mở app. Ngược lại sẽ mở web page như bình thường. Ở phần mở website này hoàn toàn phía sever có thể check device iOS, Android để điều hướng tới App Store hoặc Play Store và với các device khác thì điều hướng tới trang chủ. Đây là cách mọi người thường xử lý với Deep link web page.</p>\n<h3>Cài đặt</h3>\n<p>Cách cài đặt với Android bạn cần setup đủ phần scheme, host và cả path nếu cần. Tham khảo tại <a href=\"https://developer.android.com/training/app-links/deep-linking\">link</a></p>\n<p>Cài đặt với iOS có 2 phần</p>\n<ul>\n<li>Cài đặt trên app</li>\n</ul>\n<p>Setting Associated domain trong <strong>Identifier</strong>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/11a7401815da1168d934c2260399a681/2c95d/associated-domains-identifier.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABEElEQVQoz5WS24qEMBBE8/9f6K4PIoK31XiJWXXVOMdkGdBxBi2wEU11VXVHxHHseZ7v+0EQfFuEYfhlMY7j+hFimibZdo3S/e+Gvu/h8JFqjDknzcsy8SyCJ0mSLMvSNKVGUSSlfB475Rul1U8hK7mR67oehgG1wyGMlGX5wbygN1Ja68linjc/TpAIbdtS3/nfyJxomubPAr4jvw18IOd5XhQFnPUmhBMhc9d1mKfi3OzhJveKfzIzq6qKFqcKzymcKyuliM1sZouDAhPl76u+mBdDVlaCsragxSE/EyXOiTLkyaz0xjlMdntlzjvbNHYrBSzMXMMuM5cJJplvKLub2Fjwco8MIGAYJsrXL8kD0AWtHsmtsnUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"associated-domains-identifier\"\n        title=\"associated-domains-identifier\"\n        src=\"/static/11a7401815da1168d934c2260399a681/8c557/associated-domains-identifier.png\"\n        srcset=\"/static/11a7401815da1168d934c2260399a681/4edbd/associated-domains-identifier.png 175w,\n/static/11a7401815da1168d934c2260399a681/13ae7/associated-domains-identifier.png 350w,\n/static/11a7401815da1168d934c2260399a681/8c557/associated-domains-identifier.png 700w,\n/static/11a7401815da1168d934c2260399a681/e996b/associated-domains-identifier.png 1050w,\n/static/11a7401815da1168d934c2260399a681/2c95d/associated-domains-identifier.png 1099w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Cài đặt Associated domain trong phần <strong>Singing &#x26; Capabillities</strong>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 688px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06d9aa0afd03352eb1814ca299e291d8/ebf47/setup-ios-associated-domain.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.571428571428573%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAmklEQVQY022OSRKDIBBFOUcEByanYErJnp07Ke9/mR/AkFIri1c0Dd3/ESEVzPTCYt9YFot+GPEoKArK0nnA0v0MZeUFVlao6gYkFnXDwYVEwwXGp0HXD1BKQ+s2oQIivCeCQPx3D8gh5GpCUxIPA+u6Yt93+G2D9x7OOczzDGstjJn+WsYeuTfzUt12kMEyor4chvJneF6U6w/y6XDSFAvSEwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"setup-ios-associated-domain\"\n        title=\"setup-ios-associated-domain\"\n        src=\"/static/06d9aa0afd03352eb1814ca299e291d8/ebf47/setup-ios-associated-domain.png\"\n        srcset=\"/static/06d9aa0afd03352eb1814ca299e291d8/4edbd/setup-ios-associated-domain.png 175w,\n/static/06d9aa0afd03352eb1814ca299e291d8/13ae7/setup-ios-associated-domain.png 350w,\n/static/06d9aa0afd03352eb1814ca299e291d8/ebf47/setup-ios-associated-domain.png 688w\"\n        sizes=\"(max-width: 688px) 100vw, 688px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>cài đặt trên sever cần trả về dạng json với đường dẫn <code class=\"language-text\">yourDomain.com/apple-app-site-association</code>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6685ab385b62d6bcf9eb7ddfd97a66d7/432e7/AAAA-json.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAAzElEQVQoz6WTiwqEIBBF/f+/TDB720Mqes1yB4xsjXBXmITRztw7TYJu6zgOb49dwlpLWmtq25aWZfkLxkA88jwnKSVDt207oW8RKs7AaZqormveY9SF7oprEgrLsqS+7ylJEkrTlAtVVUVFUVDXdZ76R4UuiRezLKNxHLmvSikGohDgOEOgRfM8h4EuAUjserTsDpqmYctOkTGGcwgoXdf13fI1gT7B0jAMDIEtfCgX+75/AYNjg4tuBn+x6QFh424ldvY84Nsgx/45H/qHsei5v9gTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AAAA-json\"\n        title=\"AAAA-json\"\n        src=\"/static/6685ab385b62d6bcf9eb7ddfd97a66d7/432e7/AAAA-json.png\"\n        srcset=\"/static/6685ab385b62d6bcf9eb7ddfd97a66d7/4edbd/AAAA-json.png 175w,\n/static/6685ab385b62d6bcf9eb7ddfd97a66d7/13ae7/AAAA-json.png 350w,\n/static/6685ab385b62d6bcf9eb7ddfd97a66d7/432e7/AAAA-json.png 570w\"\n        sizes=\"(max-width: 570px) 100vw, 570px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n<blockquote>\n<p>Ngoài appID chứa team ID và bundleID phần path có thể config Deep link liên kết wake app hay không, chi tiết tham khảo <a href=\"https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html\">bài viết</a> hướng dẫn của apple</p>\n</blockquote>\n<p>Sau khi cài đặt bạn có thể check validate apple-app-site-association tại <a href=\"https://branch.io/resources/aasa-validator/\">branch.io</a>. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/886f269df3ef9bb2d237e78ef7be005f/0a47e/reddit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 104.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3klEQVQ4y5WU/bKaMBTEfdg+ZGf6f5+hM47XL/yoAgKBBBJ0ezZXuJECtY47REJ+2bM5srDWgmqapr9qrVFVlR9TzrlJhWupxRBY1zVutxviOPZgigvv9/uoJoHhRCnu8jyHMQZ1Y9G27aRGgV1p3QRdqbIEnAVwl6+4eTy8ozkgrwsrDhrbvECNCI8WP6IE336u8Ot3gjyJkReFj2RoINSCMEJb1wZBO8j2+MgrfI9SXIoSSiKoxPkwoqG8Q9ta3FSOUpX+dEspl3JGA42B0ZWHcY4OKW78kBhC8d7Ct0XroGvtD4G//SIZa1Gljc+Uc1RXBfMMYfx4IK0bWyPTko+pvQsunDrVYQ+G1x6oBRirFJWUXEjwXe8NA5/TC5AOkzKDLj/zC3OkQif/BLqnw2vnUBVQSnnQVGvMO5RTrl2DXCvo6jP8sIHHmnlMfO7rlGUw5Was14bqmr3PkIqTBOv1GsvlErvdDlEU4Xw++5fEO+IL5eufIgPeOB6PWK1WHrjdbhHtIySyUZqms+IzWZY9gc8yeXOz2XgQnZ1OJ1yv137BHPgF2JUcOiSY2u/3PWgO+pdDhskcmCFdET5c8HbJocPL5eJLPhwO3i3LpkKXbwM5QSgBPOGwzP8B/gEheFfWWeOEugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"reddit\"\n        title=\"reddit\"\n        src=\"/static/886f269df3ef9bb2d237e78ef7be005f/0a47e/reddit.png\"\n        srcset=\"/static/886f269df3ef9bb2d237e78ef7be005f/4edbd/reddit.png 175w,\n/static/886f269df3ef9bb2d237e78ef7be005f/13ae7/reddit.png 350w,\n/static/886f269df3ef9bb2d237e78ef7be005f/0a47e/reddit.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Ưu điểm:</h3>\n<ul>\n<li>Địa chỉ domain là duy nhất nên tránh trùng lặp với các app khác</li>\n<li>Ngoài wake app ra có thể điều hướng tới Store hoặc website khác phục vụ marketing </li>\n<li>Với iOS không cần popup confirm khi click Deep link</li>\n</ul>\n<h3>Nhược điểm:</h3>\n<ul>\n<li>Cần domain https với iOS</li>\n<li>Phụ thuộc setup của sever (apple-app-site-association)</li>\n<li>Phụ thuộc vào sever, nếu sever die thì cũng không mở đc app</li>\n</ul>\n<h2>4. Custom Deep link: Firebase Dynamic link</h2>\n<p>Custom Deep link cũng tương tự như Deep link web page nhưng thường do bên thứ 3 cung cấp. Custom Deep link mang đầy đủ đặc điểm của Deep link web page (App link, Universal link) nhưng có thêm phần thu thập dữ liệu khi user click hoặc tải app</p>\n<p>Một vài nhà cung cấp custom Deep link phổ biến: Firebase Dynamic link, branch.io, Appflyers, Repro, Adjust, braze.com, Adbrix... Điểm chung của dịch vụ này là tích hợp kèm với các dịch vụ tracking dữ liệu khác trên đa nền tảng như web, mobile (iOS, Android), socical phục vụ cho việc đo lường hiệu quả các chiến dịch quảng cáo marketing.</p>\n<p>Chúng ta cùng tìm hiểu đại diện phổ biến dễ dùng và miễn phí Firebase Dynamic link.</p>\n<blockquote>\n<p>Với các ứng dụng kinh phí thấp không cần tracking dữ liệu quá phức tạp, Dynacmic link tích hợp cùng dịch vụ Firebase là một lựa chọn tốt</p>\n</blockquote>\n<h3>Cài đặt</h3>\n<p>Dynamic link bạn có 2 lựa chọn dùng domain của bạn hoặc dùng domain free do Google cung cấp dạng <code class=\"language-text\">yourDomain.page.link</code>. Nếu dùng domain của bạn việc setup sẽ khó khăn hơn. Bạn cần dùng qua Firebase Hosting và xác thực DNS. Chi tiết sẽ hẹn 1 bài gần nhất khi mình setup được :D</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 698px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/67bb052420adbb9c9dc900505893aa81/487bb/domain-firebase.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB7UlEQVQoz4WQS2sUQRSFC7LShaAbjeIrAcHnShB15daF6+xVUETFaEwUjZgZJ4IQgqv8g6yCmERBf4Hg0qUrJz3T1e/qnn7UTM94rLrdzYwh0cXHrXPPqdu3i03ONHF23sa5eQtnXlo49dzCwUcmDj/mGJ/W1cSh6YJKj4/oYY9TZaefGbi66OJizcaluo0Lr2xMzHEcf8pxbIbj6BOOiVmOk7OlVpxQ3uTcUI/Czr8wcO2di/33TYzdbuHAgzZuvPdwRG2ot2A3DVxu2LjScLDvXhtjt1r0wevLHt3Ze7eNPXeGsIUPDt5+7uDNZojaRoi6YvFTRFWzsB6ioXSj9LWubw4ztY0ItXXdF3j9UYANZIh+FmCQCaCrzmmAPPHxWwoMFLrmqdLKo15W+DpXZfU9QCpyMNvx0NxqEUbLxK8to6BpkNaQ1zYJ1wsIx/PhuAWuLxCICKnsggkRIooiJEmCPM+Jfr+PXq8HqQLdboGUkmqV2Qnts1AN45zDNE1YlgXHcejs+z4N3k71gd1gnU4HWZYhTVNCn+M4prrbFnr70SFa5wpd1cCYgr2yQWapd9qg6le5YpB6krLH9Db/urydqq/fNxQBLD/Gw9UAUyselr6EYIEQf/3K/xjdUkr1PKnE1x8J1r7H+PYzwR9nwD0MY2CzWgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"domain-firebase\"\n        title=\"domain-firebase\"\n        src=\"/static/67bb052420adbb9c9dc900505893aa81/487bb/domain-firebase.png\"\n        srcset=\"/static/67bb052420adbb9c9dc900505893aa81/4edbd/domain-firebase.png 175w,\n/static/67bb052420adbb9c9dc900505893aa81/13ae7/domain-firebase.png 350w,\n/static/67bb052420adbb9c9dc900505893aa81/487bb/domain-firebase.png 698w\"\n        sizes=\"(max-width: 698px) 100vw, 698px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau khi setup domain thành công bạn cần setup AppID và TeamID trong mục <strong>Project Setting / General</strong> đối với iOS app. Khi bạn setup xong thì có thể check config tại <code class=\"language-text\">yourDomain.page.link/apple-app-site-association</code> tương tự như Universal link bên iOS. </p>\n<p>Tiếp đến bạn cần tạo Dynamic link mới theo domain đã setup </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 618px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a2c448721de68da5274c6da6538aa87/6e6fb/short-url.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAqElEQVQY041P0Q7CIAzk/z/QRx80OpQSBhtSwILdGh9cdPFCmkLvrofSnk5Q8DEx5nkOIXjvSym999Za34U6mufhkmNwYO04js45AEDEH+KPFyWknDMLpDJSSpwixshVEvGNWz+lq6OzrVgWF8Xu9UnCq7XSG23Fdm/rtB6ZLJtZY+43AGOt5cxaa2PMMAxst/9ztU5aSISFhCrsr5u3YokTkXIVcf8fLzdlmx++T37XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"short-url\"\n        title=\"short-url\"\n        src=\"/static/3a2c448721de68da5274c6da6538aa87/6e6fb/short-url.png\"\n        srcset=\"/static/3a2c448721de68da5274c6da6538aa87/4edbd/short-url.png 175w,\n/static/3a2c448721de68da5274c6da6538aa87/13ae7/short-url.png 350w,\n/static/3a2c448721de68da5274c6da6538aa87/6e6fb/short-url.png 618w\"\n        sizes=\"(max-width: 618px) 100vw, 618px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Setting Deep link. Deep link này cùng trùng với Associated domain tương tự như setup trong app App link, Universal link</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d3e4394e9fcafbfdec1317f8c96d1730/fcda8/dynamic-link.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA30lEQVQoz5WRa46DMAyEuf/Veof9uaGBEOK8A053AhJqu61KPyHLgYw9Nt3lJ1ot+2tDCCGlHMfxdo5O0lpScM6HELxvMca4far7A5i53sEbSDrkZsNa65ybN4yZlaZ+pKuyhpwlQnV3BxGllDrU2BvuPQGOOcXZr2Lm3nBZ39s+xIjLsry8BIf/3zTbyIZhwJKUUojIReM3pQzJ47D1afLWOedcSkHEGGh+7OMjWFjFhrTWWAPEqHK4+izGVax6mqb9D9XTNNsQwCp6Qmgj+8S30zQxrMIzr4tPNeQvxH+Z4IW098ElhwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dynamic-link\"\n        title=\"dynamic-link\"\n        src=\"/static/d3e4394e9fcafbfdec1317f8c96d1730/fcda8/dynamic-link.png\"\n        srcset=\"/static/d3e4394e9fcafbfdec1317f8c96d1730/4edbd/dynamic-link.png 175w,\n/static/d3e4394e9fcafbfdec1317f8c96d1730/13ae7/dynamic-link.png 350w,\n/static/d3e4394e9fcafbfdec1317f8c96d1730/fcda8/dynamic-link.png 590w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Setup wake app và tuỳ chọn điều hướng khi app chưa cài với iOS và Android</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 520px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a7059323354beb0495784920818a6d4/69902/define-deep-link-ios.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABg0lEQVQ4y41TSXLDIBDM/x+UH+SYU46+JJWyFoQkNoHAgNNiXLbsiiX3YWoo6JmehbePg//pfN81vO8554yxcRzhSCnPe3j7/PbHIUgxyIJhGLTWSqlpmvbJxWbvZ+TsC8hBFORvmgbOc3LO1ucjd5y1vICUCyHIt9ZuZM4xna1Pwhil9VgA/bBQDmYIYdG2wo18PbCQlHVSLDkhFcqJdmXCORU8knPKKXi8xh2s94s/F8BfZ7uTTRcpZ2Md6QSBHMAV7JBDzL88cN61BXVdU9u7rkspPW3YRXZO8+yGAhBeGfKanI2ZVIExBlKheSPnIxmNoSKxYVMBtS3GuENGEtCwFRgvtooKRgmwiPUqGd1CzQgBi7ZhW2ARjo4I+pSMpWSsxefCUwTqyz+7WvTiYWYXMgqjmqXSUpnJGJozKkdQasF6t+7IeCGETPGk58x1Or+G5WNsXP/7H27k9y93aGbeVlgnNKaq6rZlvOdVVaFtO5mZStpFhd80Cl2APSG7MWHCH/CkjY8qbqKHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"define-deep-link-ios\"\n        title=\"define-deep-link-ios\"\n        src=\"/static/7a7059323354beb0495784920818a6d4/69902/define-deep-link-ios.png\"\n        srcset=\"/static/7a7059323354beb0495784920818a6d4/4edbd/define-deep-link-ios.png 175w,\n/static/7a7059323354beb0495784920818a6d4/13ae7/define-deep-link-ios.png 350w,\n/static/7a7059323354beb0495784920818a6d4/69902/define-deep-link-ios.png 520w\"\n        sizes=\"(max-width: 520px) 100vw, 520px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Sau khi cài đặt thành công bạn có thể xem chi tiết trong mục Link preview (debug) </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 487px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d24fd8211f587556df935ca11f61aa5/7b439/dynamic-link-map.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAAsSAAALEgHS3X78AAAD/klEQVRIx5VV+28bRRD2//874qEGJ43SBgEqSEU8hIraJqUoEEFLKSUP23F8D5/vYd/7+fHNee98iRzZOWm0t7O7387MNzPbK6sKeVWi4LhOgjTDNEhhUeS/0cu5qihvSlmhh01fyY0EKpMMPLFxe+9d4OGBdo5DY4ADfYBDc4BvTRv9sYuHEwf7ExePNBcH6n//2sGO5uH4Px324yOYX73G9MlvMPdfIjrT0fvLd/DR9Qd8Pb3CnnaBPsGfTuWwR1Abe5THBDik7Kr5njHHr+cG7EdHMA6PYX7xCvrOM0TU9cBYtB/jUBRFO03ynLrVvKL7WWfeHmNIWpclwHG53JQR0PBC/OvHeO4EeD5b4AXHN5y/UboXSjcIU4gxzjyE6fj1f01KwhutJIKfpvCSBAuOKYHTxhJhlBtj6lpvaGlRVsopsl4u10TT87MUH1wbZ0qGC4+HCzyjFU9NF98YLl7PIzhZju9p3XeiMz28C5LlfU041GU9GdJqFRf5z7n4t5/g2PZrFy+jFPO8qN0+4vylvYCeZC1QAyZjbx6nuORBmaQ8NHYDRNkS1OOoRwlyuhTXLlaw0xwGdV2QG3kYcYPFmysVq5SuJYzXl4aHjy+0Wn7mhVZaoH9t49PzCT4ZGDhdxMtwdiysAdcWBzfMeFFEi0NKwJimvMypLyvgM52ioly53LVwFQM1qlqdMm4xXY4JaMs/ASyOOUefl3lrYngL8GY8hnYAl0wWtMrjKGEYWgskBIsJtiD4WkB0aG8WHFo24AEjoRBgTjev4wwTik4STerCrst3AZZq4Xfm3a40g7GFfTaGn0iKyENN6XSXpESbSWkWZFOmLFjQSkmbtJ4v1+esqOKutFnnckZG/2RanDAnj1mn7xlDSew/aPmJ6+MVq2gUZ5tcXt2W1ylCdtlFrsK4Thdh2SPolDEchwlTZ0MMu+YL4IRM6nR3yMNSZkKCjBoBhyTMIjFbA4rLT8w59oYGdgc6fiEhNi0+EFKGOnZHZh2Se5HSpEVtsZAkZVmWbXzy+5AigCMS4NI1n24aTBEptSs235CuumwOVtO+trFQ0mPiRQgivnYEiggqlaK5ITK6LhJvimF3QdgUUmbyJvNgUAoh7Epk26JuJoBltX2lnNDdz64s9C81fE4Cfpj5+JHEPBhN0b+YYIfVcnofUqQK8rK80c6WhFQrUsp7kCKb5c14SzJO+aqd8YXzGYa3bMRLXYTxpkq5ndhyYBDE+IeAmkps0Z37Ed4TVOK4NSl5/TSqJKdlkXoW2odMOvYmwK6F0tRjFUN5xHTmX8J5Q5q8QbMg3t5CkwzqisXmihE7jBdlbSNZ957c3bFJgte0eLUmVoVrkvm2hf8DWo39t3j6zgAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dynamic-link-map\"\n        title=\"dynamic-link-map\"\n        src=\"/static/8d24fd8211f587556df935ca11f61aa5/7b439/dynamic-link-map.png\"\n        srcset=\"/static/8d24fd8211f587556df935ca11f61aa5/4edbd/dynamic-link-map.png 175w,\n/static/8d24fd8211f587556df935ca11f61aa5/13ae7/dynamic-link-map.png 350w,\n/static/8d24fd8211f587556df935ca11f61aa5/7b439/dynamic-link-map.png 487w\"\n        sizes=\"(max-width: 487px) 100vw, 487px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Thống kê</h3>\n<p>Ngoài những thống kê đơn giản liên quan đến việc tracking created, clicks, first open, re-open  bạn cần dùng <a href=\"https://firebase.google.com/docs/reference/dynamic-links/analytics?authuser=1\">Analytics API</a>  để lấy dữ liệu thô chi tiết hơn. </p>\n<p>Biểu đồ thông kê nhanh trong Dynamic link chỉ dành cho nhưng link tạo trực tiếp từ webpage Firebase console chứ không show thống kê từ những link Dynamic link custom tạo từ app.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2d1d2aba434255fad9904bd81060032e/30c92/chart-dynamic-link.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABYElEQVQoz4VSSU4DMRCcP3PhE/wDwRnBDxCniDsSFwghKON47cUbbc8MBBRCqTSerna5vfTwrnDiekTtEIDCH/RAJbOzWqj2e+1gsIFcYOtJCEjYCQdsCvHE+ye4e7Q3K7t6dogwoCQJmTnyDCKKkTsbJkWmyXhxq86vx7NLdfVga+pmpVQ3zHDOAYDo0CGKMUZr7UMgcJFcRBPJE/NQS5HVSyl1QUppqjZBUhKKKD8p14kyW8LBQ3TA4sk515MALsjNlcuMIXDxGJu0mMtPTIp8dcievsNmjjagtqXvtvyB3GePmoOPX6vnLGZ5Dx9STofH/o2eURujR+jmulTOFBPL4icqS7ZV3pj9ztfl0K0yU4SAuQunL8y8fJi3XV1Kt8qEUdpEAooI7JD9EcYA4Pava73dyghgMXrZ75ARCEJ/XumpdoSlvWZK64nY3r73HDO2T+KcU2uS+t+Gj19iKZ/LvTJx12qkKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chart-dynamic-link\"\n        title=\"chart-dynamic-link\"\n        src=\"/static/2d1d2aba434255fad9904bd81060032e/8c557/chart-dynamic-link.png\"\n        srcset=\"/static/2d1d2aba434255fad9904bd81060032e/4edbd/chart-dynamic-link.png 175w,\n/static/2d1d2aba434255fad9904bd81060032e/13ae7/chart-dynamic-link.png 350w,\n/static/2d1d2aba434255fad9904bd81060032e/8c557/chart-dynamic-link.png 700w,\n/static/2d1d2aba434255fad9904bd81060032e/30c92/chart-dynamic-link.png 874w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span> </p>\n<p>Nếu bạn dùng dùng mạng Viettel bạn sẽ thấy tin nhắn của MyViettel cũng sử dụng Dynamic link dạng <a href=\"https://myvt.page.link\">myvt.page.link</a>. Dynamic link này link tới ứng dụng My Viettel.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/3534c/my-viettel-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVQoz32SbW/aMBSFkTq+8LbCuhYQXdUqaWkLpQ0UwksTO7ETE2AkQMf2/3/I2bU3TZoG+3B0r86NHx37JlcoFFGpfESpVEahUEJRq6hVNl65XPk9KxrpmfZOTj4gl8v9K8/jmM8X0HWx+Io4nsN1p2AswHqdYTQaQ8rYfCMjhclkhk6nh/Pz+mEg5wJpuiFQgiia08GlOax7IeI//mqVwvc5eRGGwzEuLhqHgePxDEEgoFQCDZdSYUlJNYwHEkmyMhDtex7DbrfHdOodT6iHjIVgPMTsjSGiK0tKxChNJAR8goQEN4kJmiRLOM7r8YRSSMggQKIU0tUKSRybtNcDhSs3w3U/gt1+QtuycGfZsKw72HYb9XrzMLDteLBf6VA/RHu8gDWIqSa4HGa4nOzRct/x5Vng6omh1WUYDCeIaTmNZusw8GWm4Ig9HgjS5d/gyB/ovK3xzLe4J69Htcff0Zff0WU7OH0X7miC5jEgozeK6doRaZum2GYZZCiwoZ55PrjvI+SBmSsp4bwMcHNjo9Fo/u+32dJSBG1bmt9EqYVZTLbZwaL3MrJ0vcft7QMeH5+Ov2G1WsPZ2WfoenpaNb2W7rVXq336S9XqL+Xz+YPAn3apQBA8YMHsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"my-viettel\"\n        title=\"my-viettel\"\n        src=\"/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/8c557/my-viettel-2.png\"\n        srcset=\"/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/4edbd/my-viettel-2.png 175w,\n/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/13ae7/my-viettel-2.png 350w,\n/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/8c557/my-viettel-2.png 700w,\n/static/6a26ee0e4a2c8c2dfc5a33d5a93effaa/3534c/my-viettel-2.png 808w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span> </p>\n<h2>4. Tổng kết</h2>\n<p>Tất cả các dạng Deep link này đều có thể custom thêm path và query để truyền thông tin thực hiện điều hướng các flow khác nhau. </p>\n<blockquote>\n<p>Với user chưa tải app bạn không thể vừa click tải app và mở app lần đầu lấy đc thông tin từ Deep link. Việc lấy thông tin từ Deep link chỉ thực hiện khi user đã tải app. Vậy nên hay tách ra là 2 link tải app và Deep link điều hướng các flow chức năng.</p>\n</blockquote>\n<p>Ví dụ bạn có thể tạo 1 Dynamic link (chi tiết tạo Dynamic link trực tiếp từ app bạn có thể xem tại <a href=\"https://firebase.google.com/docs/dynamic-links/ios/create?authuser=1\">đây</a>) từ user A mời user B vào room chat của mình. Thông tin truyền vào cần <code class=\"language-text\">room</code> và <code class=\"language-text\">user</code> . Dynamic link sẽ có dạng <code class=\"language-text\">yourDomain.page.link/joinChat?room=ce98x74Dk&amp;user=tHW94kd</code></p>\n<p>Bạn cần bóc tách lấy thông tin từ Deep link từng phần scheme, host, path và query để lấy thông tin điều hướng khi user B click vào link này. Với iOS bạn có thể xem cách chi tiết tại link này: <a href=\"https://developer.apple.com/documentation/xcode/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app\">handle URL Scheme</a> và <a href=\"https://developer.apple.com/documentation/xcode/allowing_apps_and_websites_to_link_to_your_content/supporting_universal_links_in_your_app\">handle Universal link</a>. Với Android bạn có thể tham khảo tại <a href=\"https://developer.android.com/training/app-links#add-app-links\">handle App link</a></p>\n<p>Chú ý phần deep link này chứa thông tin nên để đảm bảo an toàn bạn cần mã hoá lại phần path vs query\nBạn có thể dùng mã hoá AES. Link mã hoá sẽ có dạng <code class=\"language-text\">yourDomain.page.link/VYlCFA1FhPEYjKcvfN7dkNpZoBmM73XBT0hyiF7kZ6</code>. Để test mã hoá và giải mã AES bạn có thể thử tại <a href=\"https://www.devglan.com/online-tools/aes-encryption-decryption\">www.devglan.com</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cbcfe4ba8facf8d43da06bb38431b426/0a47e/encrypt-aes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADXElEQVQ4y41UyW7cVhDkd+Uz8itGDgZycXzOB/iaYwA7CWCfjFxycLxovEkaydbsG4fbcBtuj+SUq5scSV4CR0DhDaheqqsXa75c4WTwGqdnQ7x5+w7nwwt935+e4fmLl7gajVE3LWbzBV6eDHBx+QGvTl7j7Hyofu/en+LZvy/0e1kZWK7nYzKdQQKPxlNigq3jQb77wQ5xulfDreNitlhitd5gMptjTB+b38TG9QPESdoF3Gc5HLcLEPCf29Ua7sZGGMXYeR78rYOKhgkd5kw2I+PFdIopX4G72SBwHHh8E/pYlanRtq3i0L9N01yjJWpiv88Q0lEQMVHoughsG1madj51jbpuYBkG/N6fMCzK8rt2ktjahRGiOEGWF8iLkjpUKMtKgyiM0e9RTAloGxJuEMF2qR2Ziq9oJxA7S8QcXlywu0MV3KPADvWUwFKCYSmGrzRqPKF2bIi/izWoNCSKU7KvFNqUYBfqSGzs7XWmUkusriGZJbE0TRIdWN7hcCBA/Q5aquitDMVBaMvHjk0HYXdEXhSQxJJUxifpRymnrl8mVg3XHBMxTtlJ6fqR/m22klSC5tRadL2d/EhAA0oz4iQh5fYzzUz/+8jQC8hw62Hr+lr+MfE3Ga56hsLghmH1GcM8S5DutvCdFRYcfvFTmcwNS/G18jyH57nUxmGXbTVs2vZaP2F6aCoMpgUe/GPw+6uS0uR96bWWf4R22fEjnI+4x3NbtRwtHCzJwObKyVpmhWErSzwaFPjxQY2fHkozTD/sN+NS9NVYvz2v8cOvLe487NasrGrVoihud9AgjnYIfRuBu8Ga8zrnobj88FFJHIdabK3LVYrHgxDPLiNq2F2XhrNl2CRTt/qKQ5zscTWe4eNoQvau2soSKLgIApkSK98n8Nc8WYsJprwmC26CLRvDkn25InwTXc0Se+qWUgZJdPjGLsuRsDIarCQIS3CWS2zmcyzHY0RBgJINK7JMG9DWt4+DhGsVTX+hWq6NNOZ/XRugwdOzHHf/rPHLE4N7hPweO4YT0DWp2xxqWOpFqb+C6VGZhvFK/D0s8PNfBveflLj3uMLdP0pc2QXvIKXICr1W2mWZelmr/4L8P+SbxjsONq9ysEEWcU2DNbu9wpJ6r3mtZdQSHttPcp48oeHBXWkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"encrypt-aes\"\n        title=\"encrypt-aes\"\n        src=\"/static/cbcfe4ba8facf8d43da06bb38431b426/0a47e/encrypt-aes.png\"\n        srcset=\"/static/cbcfe4ba8facf8d43da06bb38431b426/4edbd/encrypt-aes.png 175w,\n/static/cbcfe4ba8facf8d43da06bb38431b426/13ae7/encrypt-aes.png 350w,\n/static/cbcfe4ba8facf8d43da06bb38431b426/0a47e/encrypt-aes.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>Hãy đảm bảo rằng key mã hoá và giải mã được đồng nhất.</p>\n</blockquote>\n<p>Trên đây là toàn bộ những thứ mình biết về Deep link. Bài viết có tham khảo nhiều nguồn từ internet sẽ không tránh khỏi những sai sót, rất mong góp ý của mọi người. Cảm ơn mọi người đã đọc bài.</p>\n<p>GLHF!</p>\n<div class=\"custom-block author\"><div class=\"custom-block-heading\">Lương Tuấn Anh </div><div class=\"custom-block-body\"></div></div>","id":"29372ea4-37e0-5d97-8c44-5c8a7b283a96","frontmatter":{"title":"Deep link, App link, Universal link, Dynamic link, URL Scheme","date":"17-12-2020","tags":["ios","android"]},"fields":{"slug":"/deeplink-applink-universallink-dynamiclink/","readingTime":{"text":"8 min read"}}}},{"node":{"excerpt":"1.Giới thiệu Chào cả nhà, sau bài làm sao để tạo animation sóng trong iOS thì nay em trở lại với một chủ đề nhỏ nữa muốn chia sẻ với mọi người đặc biệt là những anh em iOS. Đó là làm sao để tạo…","snippet":"<html><head></head><body><h1>1.Gi&#x1EDB;i thi&#x1EC7;u</h1> <p>Ch&#xE0;o c&#x1EA3; nh&#xE0;, sau b&#xE0;i l&#xE0;m sao &#x111;&#x1EC3; t&#x1EA1;o animation s&#xF3;ng trong iOS th&#xEC; nay em tr&#x1EDF; l&#x1EA1;i v&#x1EDB;i m&#x1ED9;t ch&#x1EE7; &#x111;&#x1EC1; nh&#x1ECF; n&#x1EEF;a mu&#x1ED1;n chia s&#x1EBB; v&#x1EDB;i m&#x1ECD;i ng&#x1B0;&#x1EDD;i &#x111;&#x1EB7;c bi&#x1EC7;t l&#xE0; nh&#x1EEF;ng anh em iOS. &#x110;&#xF3; l&#xE0; l&#xE0;m sao &#x111;&#x1EC3; t&#x1EA1;o carousel trong iOS v&#x1EDB;i swift.&#x2026;</p></body></html>","html":"<h1>1.Giới thiệu</h1>\n<p>Chào cả nhà, sau bài <a href=\"https://blog.tomosia.com/swift-tao-animation-song-trong-ios-voi-swift/\">làm sao để tạo animation sóng trong iOS</a> thì nay em trở lại với một chủ đề nhỏ nữa muốn chia sẻ với mọi người đặc biệt là những anh em iOS. Đó là làm sao để tạo carousel trong iOS với swift.</p>\n<p>Với carousel thì đây là một kiểu UI UX rất là phổ biến. Nó có mặt ở hầu hết các website, mobile app, desktop app, ... Đối với mảng web và android thì được support khá là nhiều để có thể implement nó một cách rất là dễ dàng cho nên cũng không cần quá phải lo lắng 😄, tuy nhiên đối với iOS thì không được Apple support nhiều đến như vậy 🤧, cho nên là việc biết cách implement carousel trở nên rất là quan trọng. Do đó, em mong rằng sau khi đọc xong bài viết này thì mọi người có thể hiểu và áp dụng được vào cho dự án của mình.</p>\n<h1>2. Đặt vấn đề</h1>\n<p>Như mọi người cũng đã biết thì với UICollectionView và UICollectionViewFlowLayout hoặc từ iOS 13 trở lên có UICollectionViewCompositionalLayout thì đã có thể implement được hầu hết các chức năng của một Carousel, đó là horizontal scroll, custom UICollectionViewCell, set contentOffset, ... Tuy nhiên có một chức năng mà nếu chỉ sử dụng UICollectionViewFlowLayout hay UICollectionViewCompositionalLayout thì sẽ rất khó để có thể làm được đó là infinite scroll. Do đó, để có thể tạo ra một Carousel hoàn hảo thì em nghĩ ta phải custom lại UICollectionViewLayout.</p>\n<p>Việc custom lại UICollectionViewLayout nghĩa là sẽ phải tự sắp xếp vị trí của các UICollectionViewCell, và việc tính toán vị trí của Cell sẽ phải giải quyết các vấn đề sau đây:</p>\n<ol>\n<li>Tính toán vị trí của Cell sao cho phù hợp với design</li>\n<li>Tính toán vị trí của Cell mỗi lần UICollectionView change offset</li>\n<li>Tính toán vị trí của Cell sao cho có infinite scroll</li>\n<li>Tính toán vị trí offset phù hợp để mỗi lần scroll thì các Cell hiển thị đúng với design</li>\n</ol>\n<h1>3. Ý tưởng</h1>\n<p>Về cơ bản chúng ra có 4 vấn đề như đã đề cập ở trên, tuy nhiên design là khác nhau đối với mỗi app, hay với mỗi màn hình cho nên là ở bài này em sẽ chỉ nói đến việc làm sao để có infinite scroll. Ý tưởng của em dựa trên một ý nghĩ rất là đơn giản đó là, đối với mỗi Cell mà đang được focus, thì ta sẽ phải tính được vị trí của tất cả các Cell nằm ở bên trái và tất cả các Cell nằm ở bên phải. Mỗi khi UICollectionView change offset thì sẽ phải tính toán lại tất cả mọi thứ 😄</p>\n<h1>4. Triển khai ý tưởng</h1>\n<p>Đầu tiên ta sẽ tạo ra class CollectionViewLayout kế thừa lại UICollectionViewLayout</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CollectionViewLayout</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionViewLayout</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForElements</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForItem</span><span class=\"token punctuation\">(</span>at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant\">nil</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> collectionViewContentSize<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">CGSize</span><span class=\"token punctuation\">.</span>zero\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">shouldInvalidateLayout</span><span class=\"token punctuation\">(</span>forBoundsChange newBounds<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Bool</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mỗi khi UICollectionView reload data hay invalidate layout thì hàm prepare sẽ được gọi nên là chúng ta sẽ tính toán vị trí của các Cell ở hàm này.</p>\n<p>Chúng ta sẽ tạo ra các biến sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> itemSpacing<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">8</span> <span class=\"token comment\">// khoảng cách giữa các Cell</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> currentCellIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">// IndexPath.item của cell sẽ được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> offsetX<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">// vị trí offset của UICollectionView khi tính toán lại vị trí của các Cell</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> leftArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// mảng chứa IndexPath.item của các Cell nằm bên trái Cell đang được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> rightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// mảng chứa IndexPath.item của các Cell nằm bên phải Cell đang được focus</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> attributes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> contentWidth<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> numberOfItem<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> collectionView<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">numberOfItems</span><span class=\"token punctuation\">(</span>inSection<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> sizeCell<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> width <span class=\"token operator\">=</span> collectionView<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">-</span> itemSpacing <span class=\"token operator\">*</span> <span class=\"token number\">4</span>\n  <span class=\"token keyword\">let</span> height <span class=\"token operator\">=</span> collectionView<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>height\n  <span class=\"token keyword\">return</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> height<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Implement hàm prepare:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> collectionView <span class=\"token operator\">=</span> collectionView <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Tại lần đầu prepare cần set offsetX của collectionView = 10000</span>\n  <span class=\"token keyword\">if</span> isFirstTimePrepare <span class=\"token punctuation\">{</span>\n      offsetX <span class=\"token operator\">=</span> cycleStart\n      collectionView<span class=\"token punctuation\">.</span>contentOffset<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> cycleStart\n      isFirstTimePrepare <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Trường hợp collectionView.reloadData</span>\n  <span class=\"token keyword\">if</span> attributes<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">!=</span> numberOfItem <span class=\"token punctuation\">{</span>\n      attributes<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      leftArray<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      rightArray<span class=\"token punctuation\">.</span><span class=\"token function\">removeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Tính số cell ở bên trái và bên phải cell đang được focus</span>\n  <span class=\"token keyword\">let</span> numberOfLeftItem <span class=\"token operator\">=</span> numberOfItem <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">:</span> numberOfItem <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">let</span> numberOfRightItem <span class=\"token operator\">=</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> numberOfLeftItem\n\n  <span class=\"token comment\">// Lấy IndexPath.item của các cell ở bên trái và bên phải cell đang được focus</span>\n  <span class=\"token keyword\">var</span> leadingRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">var</span> trailingRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> currentCellIndex <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> currentCellIndex <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">while</span> leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">&lt;</span> numberOfLeftItem <span class=\"token punctuation\">{</span>\n      leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n      i <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> numberOfItem <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> i <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> j <span class=\"token operator\">=</span> currentCellIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">>=</span> numberOfItem <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> currentCellIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">while</span> trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token operator\">&lt;</span> numberOfRightItem <span class=\"token punctuation\">{</span>\n      trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">)</span>\n      j <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> numberOfItem <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> j <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/*\n    + Nếu item nào chưa tồn tại trong leftArray ở lần change offset này thì cần được add vào additionalLeftArray để có thể thay đổi vị trí của cell đó\n    **/</span>\n  <span class=\"token keyword\">var</span> additionalLeftArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> leadingRightArray <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token operator\">!</span>leftArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          additionalLeftArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  leftArray <span class=\"token operator\">=</span> leadingRightArray\n\n  <span class=\"token comment\">/*\n  + Nếu item nào chưa tồn tại trong rightArray ở lần change offset này thì cần được add vào additionalRightArray để có thể thay đổi vị trí của cell đó\n  **/</span>\n  <span class=\"token keyword\">var</span> additionalRightArray<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> trailingRightArray <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token operator\">!</span>rightArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          additionalRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  rightArray <span class=\"token operator\">=</span> trailingRightArray\n\n  <span class=\"token keyword\">let</span> centerX <span class=\"token operator\">=</span> offsetX <span class=\"token operator\">+</span> collectionView<span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n\n  <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> numberOfItem <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> indexPath <span class=\"token operator\">=</span> <span class=\"token function\">IndexPath</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">,</span> section<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">let</span> attr <span class=\"token operator\">=</span> <span class=\"token function\">CollectionViewLayoutAttributes</span><span class=\"token punctuation\">(</span>forCellWith<span class=\"token punctuation\">:</span> indexPath<span class=\"token punctuation\">)</span>\n      attr<span class=\"token punctuation\">.</span>isCenter <span class=\"token operator\">=</span> i <span class=\"token operator\">==</span> currentCellIndex\n\n      <span class=\"token keyword\">if</span> additionalLeftArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> leadingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính khoảng cách từ minX của cell đến vị trí trung tâm, cách tính này sẽ dựa vào design</span>\n              <span class=\"token keyword\">var</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n              <span class=\"token keyword\">for</span> <span class=\"token number\">_</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> index <span class=\"token punctuation\">{</span>\n                  <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">+</span> itemSpacing\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">-</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> additionalRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> trailingRightArray<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính khoảng cách từ minX của cell đến vị trí trung tâm, cách tính này sẽ dựa vào design</span>\n              <span class=\"token keyword\">var</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n              <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> index <span class=\"token punctuation\">{</span>\n                  <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> index <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> itemSpacing\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token builtin\">distance</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">+</span> <span class=\"token builtin\">distance</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> frame <span class=\"token operator\">=</span> attributes<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>indexPath<span class=\"token punctuation\">.</span>item <span class=\"token operator\">==</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">first</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>frame <span class=\"token punctuation\">{</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> frame\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// Tính vị trí của cell đang được focus</span>\n              <span class=\"token keyword\">let</span> frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">-</span> sizeCell<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> sizeCell<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n              attr<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> frame\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> attributes<span class=\"token punctuation\">.</span><span class=\"token function\">firstIndex</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">where</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>indexPath<span class=\"token punctuation\">.</span>item <span class=\"token operator\">==</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          attributes<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>at<span class=\"token punctuation\">:</span> index<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      attributes<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>attr<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  contentWidth <span class=\"token operator\">=</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>numberOfItem <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> itemSpacing <span class=\"token operator\">+</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>numberOfItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> sizeCell<span class=\"token punctuation\">.</span>width\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nhìn vào hàm kia chắc hẳn mọi người cũng đã hiểu được một phần rồi nhỉ 😄, em sẽ giải thích một chút về những điểm đặc biệt sau:</p>\n<ol>\n<li>Tại sao lần đầu tiên prepare lại cần set offset của UICollectionView lên là 10000? Như mọi người cũng biết thì offset đầu tiên mặc định của UICollectionView là 0, cho nên nếu Cell thứ 0 là đang được focus thì các Cell ở bên trái nó sẽ có vị trí x &#x3C; 0, mà với UICollectionView thì các Cell ở vị trí x &#x3C; 0 sẽ không thể hiển thị lên được trên màn hình, vì lý do này nên phải set offset của UICollectionView lên là 10000</li>\n<li>Tại sao phải cần đến additionalLeftArray và additionalRightArray? Tại sao có những Cell được set lại frame mà nó đã có trong mảng attributes? Chắc hẳn mọi người nghĩ là mỗi khi change offset của UICollectionView thì sẽ chỉ cần tính toán lại vị trí của các Cell theo offset x mới của UICollectionView thôi, tuy nhiên nếu làm như vậy thì sẽ bị mất đi animation, vì lý do đó nên cách làm của em đó là mình chỉ tính lại vị trí của những Cell mà nó chưa có trong leftArray hoặc là rightArray mà thôi.</li>\n</ol>\n<p>OK, sau đó chúng ta chỉ cần trả về những kết quả đã tính toán được ở hàm prepare mà thôi.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForElements</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> attributes\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">layoutAttributesForItem</span><span class=\"token punctuation\">(</span>at indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">UICollectionViewLayoutAttributes</span><span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> attributes<span class=\"token punctuation\">[</span>indexPath<span class=\"token punctuation\">.</span>item<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> collectionViewContentSize<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> contentWidth <span class=\"token operator\">*</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> collectionView<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>height <span class=\"token operator\">?</span><span class=\"token operator\">?</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Về cơ bản là ta đã implement xong CollectionViewLayout cho việc tạo ra Carousel rồi, chỉ còn việc xử lý tích hợp nó vào UICollectionView thôi! Mà trong bài này em sẽ không nói chi tiết về những phần đấy. Cho nên là em sẽ để source code <a href=\"https://github.com/LaptrinhvaCuocsong/CarouselDemo\">tại đây</a> để mọi người có thể tham khảo.</p>\n<p>Em có capture video kết quả, mọi người có thể download file video <a href=\"https://github.com/LaptrinhvaCuocsong/CarouselDemo/tree/master/Video\">tại đây</a> nhé.</p>\n<p>Như vậy, em đã trình bày xong cách để tạo Carousel trong iOS với Swift. Nếu mọi người có cách nào khác thì hãy chia sẻ hoặc comment phía dưới nhé 😄.</p>\n<p>Happy reading!!!</p>\n<p>by Nguyen Manh Hung - Tomosia Viet Nam</p>","id":"d6b580a0-4611-58fa-b97c-bf059c218e18","frontmatter":{"title":"Build Carousel in iOS with Swift","date":"11-10-2020","tags":["swift","ios"]},"fields":{"slug":"/tao-carousel-trong-ios-voi-swift/","readingTime":{"text":"9 min read"}}}},{"node":{"excerpt":"I.Giới thiệu về GraphQL API 1. GraphQL là gì? GraphQL là Graph Query Language do Facebook tạo ra từ năm 2012 cung cấp giao thức chung cho phép giao tiếp giữa client và server để cập nhật và lấy dữ…","snippet":"<html><head></head><body><h1>I.Gi&#x1EDB;i thi&#x1EC7;u v&#x1EC1; GraphQL API</h1> <h3>1. GraphQL l&#xE0; g&#xEC;?</h3> <p>GraphQL l&#xE0; Graph Query Language do Facebook t&#x1EA1;o ra t&#x1EEB; n&#x103;m 2012 cung c&#x1EA5;p giao th&#x1EE9;c chung cho ph&#xE9;p giao ti&#x1EBF;p gi&#x1EEF;a client v&#xE0; server &#x111;&#x1EC3; c&#x1EAD;p nh&#x1EAD;t v&#xE0; l&#x1EA5;y d&#x1EEF; li&#x1EC7;u.</p> <p>Client truy v&#x1EA5;n &#x111;&#x1EBF;n m&#xE1;y ch&#x1EE7; GraphQL b&#x1EB1;ng c&#xE1;c&#x2026;</p></body></html>","html":"<h1>I.Giới thiệu về GraphQL API</h1>\n<h2>1. GraphQL là gì?</h2>\n<p>GraphQL là Graph Query Language do Facebook tạo ra từ năm 2012 cung cấp giao thức chung cho phép giao tiếp giữa client và server để cập nhật và lấy dữ liệu.</p>\n<p>Client truy vấn đến máy chủ GraphQL bằng các truy vấn với đặc điểm: format của dữ liệu trả về được mô tả trong câu truy vấn và được định nghĩa ở phía client thay vì ở server. Nói đơn giản hơn, đây là truy vấn hướng client, cấu trúc dữ liệu không khô cứng 1 khuôn mẫu từ server (REST API) mà thay đổi theo từng ngữ cảnh sao cho hiệu quả nhất đối với client mà chỉ cần dùng duy nhất 1 endpoint.\n<img src=\"https://viblo.asia/uploads/7e2761e2-b970-4768-a20e-63e0007cb84c.png\"></p>\n<h2>2. Tổng quan GraphQL</h2>\n<p>Điều quan trọng là GraphQL không phải là một ngôn ngữ truy vấn thực sự, nó chỉ là giao thức giao tiếp giữa client và server, rất cả client (web, mobile) đều có thể giao tiếp với bất kỳ server nào mà sử dụng ngôn ngữ GraphQL.</p>\n<p>Khái niệm chính về GraphQL bao gồm:</p>\n<ul>\n<li>Cấu trúc phân tầng (Hierarchical)</li>\n<li>Hướng sản phẩm (Product0-centric)</li>\n<li>Định kiểu mạnh (Strong-typing)</li>\n<li>Truy vấn hướng client (Client-specified queries)</li>\n<li>Nội quan (Introspective)</li>\n</ul>\n<h2>3.GraphQL giải quyết vấn đề gì ?</h2>\n<p>GraphQL khắc phục điểm yếu của của REST API bởi REST có tính chất dựa trên tài nguyên cố định, ví dụ:</p>\n<p><code class=\"language-text\">GET /articles/1?include=author.name,author.email,likes.user.name</code>\nNhư truy vấn trên thuộc loại liên kết nhiều bảng, REST API cho articles sẽ xử lý khá nhiều và không được linh động. Đối với GraphQL thì sẽ như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">{\n  articles(id:1) {\n    title,\n    content,\n    author {\n      name,\n      email\n    },\n    likes {\n      user {\n        name\n      }\n    } \n  }\n}\n{\n  articles(id:1) {\n    title,\n    content,\n    author {\n      name,\n      email\n    },\n    likes {\n      user {\n        name\n      }\n    } \n  }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Với GraphQL, chúng ta quy định chỉ trả về title và content cho article, rất linh động và không bị thừa dữ liệu, hơn nữa cấu trúc trên nhìn khá rõ ràng mạch lạc.</p>\n<p>Cũng giống như REST, GraphQL hoàn toàn có thể create, update, delete, nhưng với cấu trúc sáng sủa và cấu trúc phân tầng nên dễ dàng cho lập trình viên phía client.</p>\n<h1>II. Cài đặt thư viện Apollo để sử dụng cho GraphQL</h1>\n<p>Trong mỗi API theo kiểu GraphQL sẽ luôn có 1 file <code class=\"language-text\">schema</code>. Đây là file dùng để server đinh nghĩa ra các câu query, mutation và type.</p>\n<h2>1.Giới thiệu về Apollo</h2>\n<p>Apollo IOS là một thư viện hỗ trợ mạnh và tốt cho việc giao tiếp với GraphQL. Được viết bởi ngôn ngữ Swift</p>\n<p>Nó cho phép bạn thực hiện truy vấn và thay đổi dữ liệu đối với máy chủ GraphQL và trả về kết quả theo kiểu Swift cụ thể. Điều này có nghĩa là bạn không phải đối phó với việc phân tích cú pháp JSON, hoặc truyền đi các tham số và khiến các bạn chuyển đổi kiểu dữ liệu bằng tay. Bạn cũng không phải tự viết các kiểu mô hình, bởi vì chúng được tạo ra từ các định nghĩa GraphQL mà UI của bạn sử dụng.</p>\n<p>Vì các model được tao ra với những kiểu cơ bản, bạn chỉ có thể truy cập dữ liệu mà chúng ta chỉ định muốn lấy về. Nếu bạn không yêu cầu một trường, bạn sẽ không thể truy cập vào thuộc tính tương ứng. Trong thực tế, điều này có nghĩa là bạn có thể dựa vào trình kiểm tra kiểu Swift để đảm bảo lỗi trong quá trình truy cập dữ liệu xuất hiện tại thời điểm biên dịch. Với tích hợp Xcode của Apollo, bạn có thể làm việc thuận tiện với mã UI và các định nghĩa GraphQL tương ứng bên cạnh và thậm chí nó sẽ xác thực các tài liệu truy vấn của bạn và hiển thị lỗi trong dòng.</p>\n<h2>2. Cài đặt Apollo</h2>\n<p>Làm theo cùng với các bước được mô tả chi tiết bên dưới để sử dụng Apollo iOS trong ứng dụng của bạn:</p>\n<ul>\n<li>Cài đặt  <code class=\"language-text\">Apollo</code> framework vào dự án của bạn và liên kết nó với project.</li>\n<li>Cài đặt <code class=\"language-text\">apollo-codegen</code> trên máy thông qua NPM.</li>\n<li>Thêm mã vào Build Phases để sinh các model và các câu query từ file<code class=\"language-text\">schema</code>.</li>\n<li>Thêm file <code class=\"language-text\">schema</code> vào project.</li>\n<li>Chạy thử.</li>\n<li>Thêm tệp API được tạo ra sau khi chạy thử vào project.</li>\n<li>Cài đặt thêm add-on để là highlight mã trong file <code class=\"language-text\">.graphql</code>.</li>\n<li>Tạo các file có định extension <code class=\"language-text\">.graphql</code> với các truy vấn hoặc thay đổi.</li>\n</ul>\n<h3>Cài đặt Apollo framework</h3>\n<p>Chúng ta có thể cài đặt <code class=\"language-text\">Apollo</code> framework bằng những cách sau: Carthage, CocoaPods hoặc kéo thả thư viện vào project bằng tay.</p>\n<h4>Carthage</h4>\n<ol>\n<li>Thêm github \"apollostack / apollo-ios\" vào Cartfile.</li>\n<li>Chạy bản cập nhật carthage.</li>\n<li>Kéo và thả <code class=\"language-text\">Apollo.framework</code> từ thư mục <code class=\"language-text\">Carthage/Build/iOS</code> đến phần “Linked Frameworks and Libraries” trong tab \"General\".</li>\n<li>\n<p>Chuyển qua tab \"Build Phases\", nhấp vào biểu tượng \"+\" và chọn \"New Run Script Phase\". Tạo một script chạy trong đó bạn chỉ định Shell : bin / sh thêm đoạn code bên dưới vào khung script:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/ Usr/local/bin/carthage copy-frameworks</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Và thêm đường dẫn của thư viện Apollo vào \"Input Files\" ở bên dưới, ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ (SRCROOT) /Carthage/Build/iOS/Apollo.framework</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ol>\n<h4>Cocopods</h4>\n<ol>\n<li>\n<p>Bởi vì Apollo iOS được viết bới Swift 3.1. Cho nên nó yêu cầu CocoaPods phiên bản 1.1.0. Bạn có thể nó nếu muốn sử dụng:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">gem install cocoapods</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>Thêm <code class=\"language-text\">pod &quot;Apollo&quot;</code> và Podfile.</li>\n<li>Chạy <code class=\"language-text\">pod install</code></li>\n<li>Sử dụng <code class=\"language-text\">.xcworkspace</code> được tạo ra bởi CocoaPods để làm việc.</li>\n</ol>\n<h4>Kéo thả thư viện</h4>\n<p>Bạn hãy  download reposity của <a href=\"https://github.com/apollographql/apollo-ios\">apollo-iOS</a>, và kéo <code class=\"language-text\">Apollo.xcodeproj</code> và thả vào trong project hoặc workspace, thêm Apollo.framework vào target</p>\n<h3>Cài đặt apollo-codegen</h3>\n<p> Cài đặt <code class=\"language-text\">apollo-codegen</code> thông npm bằng câu lệnh bên dưới:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">npm install -g apollo-codegen</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Cài đặt script để sinh ra mã API</h3>\n<p>Thêm bước tạo mã ở<code class=\"language-text\">buid phases</code></p>\n<p>Để gọi <code class=\"language-text\">apollo-codegen</code> hoạt động trong  Xcode, tạo một bước script chạy trước \"Compile Sources\".</p>\n<p>Trên tab cài đặt \"Build Phases\", nhấp vào biểu tượng \"+\" và chọn \"New Run Script Phase\". Tạo một Run Script, đổi tên thành \"Generate Apollo GraphQL API\" và kéo nó ngay phía trên \"Compile Sources\". Sau đó, thêm các nội dung bên dưới vào khung scrip  :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">APOLLO_FRAMEWORK_PATH=&quot;$(eval find $FRAMEWORK_SEARCH_PATHS -name &quot;Apollo.framework&quot; -maxdepth 1)&quot;\n\nif [ -z &quot;$APOLLO_FRAMEWORK_PATH&quot; ]; then\n  echo &quot;error: Couldn&#39;t find Apollo.framework in FRAMEWORK_SEARCH_PATHS; make sure to add the framework to your project.&quot;\n  exit 1\nfi\n\ncd &quot;${SRCROOT}/${TARGET_NAME}&quot;\n$APOLLO_FRAMEWORK_PATH/check-and-run-apollo-codegen.sh generate $(find . -name &#39;*.graphql&#39;) --schema schema.json --output API.swift</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tập lệnh trên sẽ gọi apollo-codegen thông qua script wrapper check-and-run-apollo-codegen.sh, mà thực sự chứa trong gói <code class=\"language-text\">Apollo.framework</code>. Lý do chính của việc này là để kiểm tra xem phiên bản apollo-codegen đã được cài đặt trên hệ thống của bạn có tương thích với phiên bản khung được cài đặt trong dự án của bạn và để cảnh báo bạn nếu không. Nếu không có kiểm tra này, bạn có thể sẽ chỉ tạo ra mã không tương thích với mã chạy có trong framework.</p>\n<h3>Tải về file schema</h3>\n<p>Apollo IOS bắt buộc người developer phải thêm vào 1 file schema của GraphQL. File schema là một file JSON có chứa các thông tin về cú pháp truy vấn của GraphQL. Thông thường tập tin này được gọi là schema.json, và bạn lưu trữ nó bên cạnh tệp .graphql trong dự án.</p>\n<p>Bạn có thể sử dụng <code class=\"language-text\">apollo-codegen</code> để tải xuống GraphQL schema bằng cách gửi truy vấn phân tích đến máy chủ:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">apollo-codegen download-schema http://localhost:8080/graphql --output schema.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nếu cần thiết bạn có thể sử dụng  header trong HTTP header cho request. Nhiều GraphQL API yêu cầu cần phải có token chứng thực mới có thể lấy về, lúc này chỉ cần thêm <code class=\"language-text\">--header &quot;Authorization: Bearer &lt;token&gt;&quot;</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">apollo-codegen download-schema https://api.github.com/graphql --output schema.json --header &quot;Authorization: Bearer &lt;token&gt;&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Chạy thử</h3>\n<p>Tại thời điểm này thì chúng ta có thể build project. Việc này giúp chúng ta xác định <code class=\"language-text\">apollo-codegen</code> có thể tìm thấy file <code class=\"language-text\">schema.json</code> trong dự án. Nếu không thì sẽ xuất hiện lỗi như thế này:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Cannot find GraphQL schema file […]</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Thêm tệp API được tạo ra</h3>\n<p>Sau bước trên nếu chúng ta build thành công thì lúc này thư viện Apollo iOS sẽ sinh ra 1 file có tên là <code class=\"language-text\">API.swift</code>. Lúc này ta cần thêm nó vào dự án.</p>\n<h3>Cài đặt Add-on cho Xcode</h3>\n<ol>\n<li>Tải <a href=\"https://github.com/apollographql/xcode-graphql\">repository</a> <code class=\"language-text\">xcode-apollo</code> xuống.</li>\n<li>Đóng toàn bộ màn hình Xcode nếu đang được mở.</li>\n<li>\n<p>Tiếp theo cần tạo 1 thư mục bên trong đường dẫn <code class=\"language-text\">~/Library/Developer/Xcode</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">mkdir ~/Library/Developer/Xcode/Plug-ins ~/Library/Developer/Xcode/Specifications</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Copy file <code class=\"language-text\">GraphQL.ideplugin</code> vào trong <code class=\"language-text\">~/Library/Developer/Xcode/Plug-ins</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cp -R GraphQL.ideplugin ~/Library/Developer/Xcode/Plug-ins</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Copy file <code class=\"language-text\">GraphQL.xclangspec</code> vào trong <code class=\"language-text\">~/Library/Developer/Xcode/Specifications</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">cp -R GraphQL.xclangspec ~/Library/Developer/Xcode/Specifications</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>*Có thể sẽ xuất hiện vài cảnh báo sau khi cài đặt add-on vào Xcode.</p>\n</li>\n</ol>\n<h3>Tạo file <code class=\"language-text\">.graphql</code></h3>\n<p>Apollo iOS sẽ tự tạo các câu truy vấn và thay đổi từ file <code class=\"language-text\">.graphql</code> trong dự án .</p>\n<p>Lúc này ta cần 1 quy ước cho việc đặt tên dễ quản lý các việc truy vấn, thay đổi bằng cách tạo file <code class=\"language-text\">&lt;name&gt;.graphql</code> bên cạnh file <code class=\"language-text\">&lt;name&gt;.swift</code>.</p>\n<p>Nếu lúc này, chúng ta cài đặt add-on cho Xcode thì có thể sử dụng chế độ xem đồng thời file <code class=\"language-text\">.graphql</code> và <code class=\"language-text\">.swift</code>.</p>\n<h1>III. Kết thúc</h1>\n<p>Mình đã giới thiệu và hướng dẫn các bạn cài đặt thư viện Apollo cho việc quản lý và giao tiếp với GrapQL API. Sau thời gian sử dụng, mình thấy thư viện này còn nhiều hạn chế về việc quản lý các task, khó cho việc mapper đối với model do chúng ta định nghĩa, khó get được status code khi hoàn thành xong request, và còn nhiều hạn chế khác. Mình nghĩ chắc thư viện này còn mới nên vẫn còn nhiều hạn chế như vậy.Mong tương lại, thư viện Apollo sẽ hỗ trợ chúng ta nhiều hơn. Cảm ơn các bạn đã theo dõi bài viết</p>","id":"89473eb0-119e-50ff-b883-b0aa8cd244c1","frontmatter":{"title":"How to install Apollo iOS library for Graph API","date":"04-09-2020","tags":["ios"]},"fields":{"slug":"/How to install Apollo iOS library for Graph API/","readingTime":{"text":"9 min read"}}}},{"node":{"excerpt":"1. Những cải tiến trong iOS 14 Ứng dụng Translate mới: Ứng dụng hỗ trợ dịch thuật mới được Apple công bố hoạt động ít nhiều giống với Google Translate và cũng khá đơn giản về mặt giao diện. Bạn có thể…","snippet":"<html><head></head><body><h3>1. Nh&#x1EEF;ng c&#x1EA3;i ti&#x1EBF;n trong iOS 14</h3> <ul> <li> <h4>&#x1EE8;ng d&#x1EE5;ng Translate m&#x1EDB;i:</h4> <p>&#x1EE8;ng d&#x1EE5;ng h&#x1ED7; tr&#x1EE3; d&#x1ECB;ch thu&#x1EAD;t m&#x1EDB;i &#x111;&#x1B0;&#x1EE3;c Apple c&#xF4;ng b&#x1ED1; ho&#x1EA1;t &#x111;&#x1ED9;ng &#xED;t nhi&#x1EC1;u gi&#x1ED1;ng v&#x1EDB;i Google Translate v&#xE0; c&#x169;ng kh&#xE1; &#x111;&#x1A1;n gi&#x1EA3;n v&#x1EC1; m&#x1EB7;t giao di&#x1EC7;n. B&#x1EA1;n c&#xF3; th&#x1EC3; g&#xF5; ho&#x1EB7;c nh&#x1EAD;p tr&#x1EF1;c ti&#x1EBF;p gi&#x1ECD;ng n&#xF3;i. T&#x1EA5;t&#x2026;</p></li></ul></body></html>","html":"<h2>1. Những cải tiến trong iOS 14</h2>\n<ul>\n<li>\n<h3>Ứng dụng Translate mới:</h3>\n<p>Ứng dụng hỗ trợ dịch thuật mới được Apple công bố hoạt động ít nhiều giống với Google Translate và cũng khá đơn giản về mặt giao diện. Bạn có thể gõ hoặc nhập trực tiếp giọng nói. Tất cả các bản dịch được thực hiện ngoại tuyến mà không cần kết nối internet. Ứng dụng này hiện hỗ trợ 11 ngôn ngữ: tiếng Ả Rập, tiếng Trung, tiếng Anh, tiếng Pháp, tiếng Đức, tiếng Ý, tiếng Nhật, tiếng Hàn, tiếng Bồ Đào Nha, tiếng Nga và tiếng Tây Ban Nha. Ứng dụng dịch thuật chính chủ này tham vọng trở thành đối thủ của Google Translate trong tương lai.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/29bf4fb6449b0ee68a4a3cd56f49538b/1ef88/image-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFad+BJcD//xAAZEAEBAAMBAAAAAAAAAAAAAAADAgABBBT/2gAIAQEAAQUCZk0/oXOG6QN85VvzDkRJz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAQADAAIDAAAAAAAAAAAAAAEAAhEDITEyM//aAAgBAQAGPwLkC7hPo+JtnXYrTtnoTKGE/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAMZH/2gAIAQEAAT8hPP4BozJQ+0riLPR3lTrp62s3/9oADAMBAAIAAwAAABCjz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAAIDAAIDAAAAAAAAAAAAAAERACExUWFxkaH/2gAIAQEAAT8QPUwggIZlRIitybHBvIAGgNkhLqnmJvO+o9P5B7jxiSHp8z//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-1.jpg\"\n        title=\"image-1.jpg\"\n        src=\"/static/29bf4fb6449b0ee68a4a3cd56f49538b/29d31/image-1.jpg\"\n        srcset=\"/static/29bf4fb6449b0ee68a4a3cd56f49538b/e52aa/image-1.jpg 175w,\n/static/29bf4fb6449b0ee68a4a3cd56f49538b/70ebb/image-1.jpg 350w,\n/static/29bf4fb6449b0ee68a4a3cd56f49538b/29d31/image-1.jpg 700w,\n/static/29bf4fb6449b0ee68a4a3cd56f49538b/9ecec/image-1.jpg 1050w,\n/static/29bf4fb6449b0ee68a4a3cd56f49538b/1ef88/image-1.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>iMessage được nâng cấp:</h3>\n<p>Bây giờ người dùng có thể trả lời tin nhắn theo các chủ đề, dễ dàng mention người khác, ghim các tin nhắn... Thiết kế trò chuyện nhóm cũng được làm mới. Ở đầu các cuộc trò chuyện nhóm, người tích cực nhất trong nhóm sẽ có biểu tượng lớn hơn.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b5e488fd48adcef289c91a54ec4104d3/1ef88/image-5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeqrMqwf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAMhFBQv/aAAgBAQABBQJly5AMWvW0p//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBEhcv/aAAgBAQAGPwJ4K1eQxcx//8QAGxAAAgMAAwAAAAAAAAAAAAAAAAERITFhgbH/2gAIAQEAAT8hRMRxlTAjRdVM4o0RI2Xfp//aAAwDAQACAAMAAAAQcw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAHRABAQABBAMAAAAAAAAAAAAAAREAITFRsUFhcf/aAAgBAQABPxB2kik0m+zhugcA595MSFg41dM3PzoxsPEd41VdV7M//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-5.jpg\"\n        title=\"image-5.jpg\"\n        src=\"/static/b5e488fd48adcef289c91a54ec4104d3/29d31/image-5.jpg\"\n        srcset=\"/static/b5e488fd48adcef289c91a54ec4104d3/e52aa/image-5.jpg 175w,\n/static/b5e488fd48adcef289c91a54ec4104d3/70ebb/image-5.jpg 350w,\n/static/b5e488fd48adcef289c91a54ec4104d3/29d31/image-5.jpg 700w,\n/static/b5e488fd48adcef289c91a54ec4104d3/9ecec/image-5.jpg 1050w,\n/static/b5e488fd48adcef289c91a54ec4104d3/1ef88/image-5.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Đa tác vụ với nhiều cải tiến:</h3>\n<p>Trình xử lý đa tác vụ dường như được lột xác trong phiên bản iOS này. Bây giờ, khi bạn đang trong cuộc gọi, bạn vẫn có thể thao tác và sử dụng những ứng dụng khác. Chế độ Picture on Picture không còn xa lạ với người dùng android, nhưng đến phiên bản iOS này, Apple mới giới thiệu đến các tín đồ của mình....</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa6b77c793979f2b7d548a6ee0d58123/1ef88/image-9.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAejO2iUJ/8QAGxAAAwACAwAAAAAAAAAAAAAAAQIDBBIRISL/2gAIAQEAAQUCfumSW0xSTJx7qnKyGq//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAdEAACAgEFAAAAAAAAAAAAAAABEQACQRAiIzGB/9oACAEBAAY/AjyGqwJRE+Tc+8xoSrxp/8QAGxABAAMBAAMAAAAAAAAAAAAAAQARITFBUWH/2gAIAQEAAT8hJs0Atq9t2aYm0bxp5YBBZ9S9Pbc//9oADAMBAAIAAwAAABBY3//EABcRAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQMBAT8QORy1u//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBNgy//xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMVFBgdH/2gAIAQEAAT8QNawO1VXMXSeQDg6lpAhpWvcUQ0GBZldQVGRLG0fJ0Ao25//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-9.jpg\"\n        title=\"image-9.jpg\"\n        src=\"/static/fa6b77c793979f2b7d548a6ee0d58123/29d31/image-9.jpg\"\n        srcset=\"/static/fa6b77c793979f2b7d548a6ee0d58123/e52aa/image-9.jpg 175w,\n/static/fa6b77c793979f2b7d548a6ee0d58123/70ebb/image-9.jpg 350w,\n/static/fa6b77c793979f2b7d548a6ee0d58123/29d31/image-9.jpg 700w,\n/static/fa6b77c793979f2b7d548a6ee0d58123/9ecec/image-9.jpg 1050w,\n/static/fa6b77c793979f2b7d548a6ee0d58123/1ef88/image-9.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Các widget:</h3>\n<p>iOS 14 sẽ đưa các widget vào màn hình Home. Các widget mang đến thông tin cho người dùng dựa trên lịch trình hàng ngày của họ. Nâng cấp này theo mình không đáng giá, sẽ làm Home trông rất lộn xộn giống như android.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bd4d87325bad2d96ec8761ba9c7a4c75/ad53c/image-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.857142857142854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAXGYVdipP//EABkQAAIDAQAAAAAAAAAAAAAAAAEQAgMyBP/aAAgBAQABBQLp2JBX6X//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGn/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/AYF//8QAGhAAAgIDAAAAAAAAAAAAAAAAARAAIUFxof/aAAgBAQAGPwIXiXxDT//EABoQAAICAwAAAAAAAAAAAAAAAAARAWEgITH/2gAIAQEAAT8hpkxLe1IRzBP/2gAMAwEAAgADAAAAEHjP/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QGE//xAAXEQADAQAAAAAAAAAAAAAAAAABEBEh/9oACAECAQE/ELDV/8QAHRAAAQQCAwAAAAAAAAAAAAAAAQARIWEQMXGx8P/aAAgBAQABPxAgJJsJsqDAFRi5kv2tHC9l4Ggv/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-3.jpg\"\n        title=\"image-3.jpg\"\n        src=\"/static/bd4d87325bad2d96ec8761ba9c7a4c75/29d31/image-3.jpg\"\n        srcset=\"/static/bd4d87325bad2d96ec8761ba9c7a4c75/e52aa/image-3.jpg 175w,\n/static/bd4d87325bad2d96ec8761ba9c7a4c75/70ebb/image-3.jpg 350w,\n/static/bd4d87325bad2d96ec8761ba9c7a4c75/29d31/image-3.jpg 700w,\n/static/bd4d87325bad2d96ec8761ba9c7a4c75/9ecec/image-3.jpg 1050w,\n/static/bd4d87325bad2d96ec8761ba9c7a4c75/ad53c/image-3.jpg 1241w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Home screen:</h3>\n<p>Lại một nâng cấp nữa iOS đã lai tạp của android. App Library mang đến một không gian mới nơi mà Apple sẽ tự động sắp xếp tất cả các ứng dụng theo thói quen sử dụng của bạn và theo các category.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/672705c08854413f7957f006188745ba/1ef88/image-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUE/8QAFAEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAABs4tc0qyEf//EABsQAAIBBQAAAAAAAAAAAAAAAAADAgETITM0/9oACAEBAAEFAm4guVbg7WroP//EABURAQEAAAAAAAAAAAAAAAAAAAIQ/9oACAEDAQE/ATP/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFJ/8QAGRABAAIDAAAAAAAAAAAAAAAAAQAQEiFx/9oACAEBAAY/AtQM160wr//EABwQAAICAgMAAAAAAAAAAAAAAAERABAhsTFBwf/aAAgBAQABPyEiUkjicgIpMrS3Midvyv/aAAwDAQACAAMAAAAQb8//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBFx/9oACAEDAQE/EBY4x//EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxCBX//EABsQAQEAAgMBAAAAAAAAAAAAAAERACEQMaGx/9oACAEBAAE/EFkUFGO0w3eagJF6nHv+GbmDEs3K4//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-2.jpg\"\n        title=\"image-2.jpg\"\n        src=\"/static/672705c08854413f7957f006188745ba/29d31/image-2.jpg\"\n        srcset=\"/static/672705c08854413f7957f006188745ba/e52aa/image-2.jpg 175w,\n/static/672705c08854413f7957f006188745ba/70ebb/image-2.jpg 350w,\n/static/672705c08854413f7957f006188745ba/29d31/image-2.jpg 700w,\n/static/672705c08854413f7957f006188745ba/9ecec/image-2.jpg 1050w,\n/static/672705c08854413f7957f006188745ba/1ef88/image-2.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>2. Những xu hướng UI UX mobile 2020</h2>\n<ul>\n<li>\n<h3>Neumorphism:</h3>\n<p>Là sự kết hợp của thiết kế phẳng với những thứ thực tế như kết cấu, độ sâu và bóng. Phong cách thể hiện sự ngắn gọn, thanh lịch với rất ít điểm nhấn màu sắc.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 463px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e8eb0b87bafe46a80bd378977d1a34ac/ecde2/image-6.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAjABQDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAMCAQQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB+vK1TLI5WGjoNyD0A//EABsQAAIDAQEBAAAAAAAAAAAAAAECAAMRMjMT/9oACAEBAAEFAjrOqPtZ1R6yrkesr50C36LKuGUMBRWDP//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BX//EACAQAAEEAgEFAAAAAAAAAAAAAAEAAhGBECEDEjEyUZH/2gAIAQEABj8CcOoiPS3yvNBbT6xZTqxZTpMdl5D6rUOEqQ3H/8QAIBAAAwAABgMBAAAAAAAAAAAAAAERITFRocHwQWGBkf/aAAgBAQABPyGYwlBDlaNAzFVptX6L+HIRm9sTY8jydz2Oc6UVy5iazYq1Z7kcEEZGoyP/2gAMAwEAAgADAAAAEEjKvIPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxBf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxBf/8QAIBABAAICAQQDAAAAAAAAAAAAAQARITFBUWGRwaGx8P/aAAgBAQABPxCqPxg23nJnRDbC4B5CBHIK20j1KHvf0wAwL5gqjlPnEFrVjB3bzN36zgDZqhg4dYEUa7YylkCeoumPknYw+vMNr7gAAKCf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-6.jpg\"\n        title=\"image-6.jpg\"\n        src=\"/static/e8eb0b87bafe46a80bd378977d1a34ac/ecde2/image-6.jpg\"\n        srcset=\"/static/e8eb0b87bafe46a80bd378977d1a34ac/e52aa/image-6.jpg 175w,\n/static/e8eb0b87bafe46a80bd378977d1a34ac/70ebb/image-6.jpg 350w,\n/static/e8eb0b87bafe46a80bd378977d1a34ac/ecde2/image-6.jpg 463w\"\n        sizes=\"(max-width: 463px) 100vw, 463px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Dark mode:</h3>\n<p>Điều quan trọng nhất mà DarkMode đem đến cho người dùng là gì? Là giảm mỏi mắt và giảm mức tiêu thụ pin cho thiết bị di động.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c960acee94ab55cd406df7b4aeb3f17/6a068/image-4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAVgtjNwcP//EAB0QAAIBBAMAAAAAAAAAAAAAAAEDAgAEBRIREzT/2gAIAQEAAQUCcIBhO0cf53k9mtWI4R//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAACAgMBAAAAAAAAAAAAAAAAAgERIjGBUf/aAAgBAQAGPwJmrK5Kk6OuO/DZ0//EABsQAAICAwEAAAAAAAAAAAAAAAERACExQWFR/9oACAEBAAE/IUSWH1w9YUXAAID3NGGvO5j1yU7d5//aAAwDAQACAAMAAAAQPw//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBFB/9oACAEDAQE/EFvI/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EF2f/8QAHRABAAICAwEBAAAAAAAAAAAAAQARITFRYcFx8P/aAAgBAQABPxBVORrgqE+So4PYKbZrY8iUEYe3Y3fcGo4PzMS5kXVcHk//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-4.jpg\"\n        title=\"image-4.jpg\"\n        src=\"/static/0c960acee94ab55cd406df7b4aeb3f17/29d31/image-4.jpg\"\n        srcset=\"/static/0c960acee94ab55cd406df7b4aeb3f17/e52aa/image-4.jpg 175w,\n/static/0c960acee94ab55cd406df7b4aeb3f17/70ebb/image-4.jpg 350w,\n/static/0c960acee94ab55cd406df7b4aeb3f17/29d31/image-4.jpg 700w,\n/static/0c960acee94ab55cd406df7b4aeb3f17/6a068/image-4.jpg 960w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Bold colors:</h3>\n<p>Xu hướng “Màu nổi” có cơ hội thể hiện mình khi những chiếc smartphone với màn hình chất lượng hiển thị cao đang dần trở nên phổ biến. Màu nổi và nổi bật được kết hợp thông minh, thẩm mỹ sẽ thu hút sự chú ý và gây ấn tượng với người dùng tốt hơn.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 367px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/fc0c2/image-8.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 149.14285714285717%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFwEBAQEBAAAAAAAAAAAAAAAAAgEABP/aAAwDAQACEAMQAAAB67IsdhIxmTRbWhJw7//EAB0QAAEEAwEBAAAAAAAAAAAAAAIAAQMRBBITIjL/2gAIAQEAAQUCMqckJWn9KSPo0QcwyJNYcVirdfYDabV1/8QAGxEAAgEFAAAAAAAAAAAAAAAAAAECEBESITH/2gAIAQMBAT8BfKN20ZRP/8QAHBEAAgICAwAAAAAAAAAAAAAAAAECEQMTIkFR/9oACAECAQE/AYRqVtja6L4UjVm9P//EABwQAAMAAwADAAAAAAAAAAAAAAABEQIhMRAyYf/aAAgBAQAGPwI7DWVE4dhLRz2ekN5VfH4q0b2cP//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExQVFhcf/aAAgBAQABPyGmpyl6gsMqZ3KDgXuDVuOSNy1fSAB7LZROgErIyw8EKPaZVsQDuf/aAAwDAQACAAMAAAAQb9Pz/8QAFxEBAQEBAAAAAAAAAAAAAAAAABEBYf/aAAgBAwEBPxCYjUGnF//EABwRAQACAQUAAAAAAAAAAAAAAAEAEUEhMYGx8P/aAAgBAgEBPxB003UsOESrJG7b7if/xAAeEAEBAAMAAQUAAAAAAAAAAAABEQAhMUFRYXGB8P/aAAgBAQABPxCJEQjanjeI+EUkT7w3Ro0/XCJq47TNqu4SD6zFj7qltcB6idRt9sg+omkTqX5yPBMkK0j2TBcEDTI46KN73n//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-8.jpg\"\n        title=\"image-8.jpg\"\n        src=\"/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/fc0c2/image-8.jpg\"\n        srcset=\"/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/e52aa/image-8.jpg 175w,\n/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/70ebb/image-8.jpg 350w,\n/static/7b0eb2bade61ffaa6d78be8ff2ab94b9/fc0c2/image-8.jpg 367w\"\n        sizes=\"(max-width: 367px) 100vw, 367px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<h3>Illustrations:</h3>\n<p>Vẫn đang thống trị trong xu hướng thiết kế mobile trong vài năm trở lại đây. Chúng ta đều nhận thấy sự phát triển cực kỳ mạnh mẽ của việc sử dụng các hình ảnh minh họa trong thiết kế, các hình ảnh thu hút sự chú ý và khiến sản phẩm trở nên đặc biệt hơn.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1d4dbd2fa77116b4a3fe29acd8527ce5/1ef88/image-7.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHuxug5of/EABwQAAEDBQAAAAAAAAAAAAAAAAEAAjEQERITIf/aAAgBAQABBQIznwRYFa2in//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAEQABExcf/aAAgBAQAGPwIQ9p4v/8QAGRABAAMBAQAAAAAAAAAAAAAAAQAhMRFR/9oACAEBAAE/IWhBTs8i4ci6FqLBSzICQ3syf//aAAwDAQACAAMAAAAQR8//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8QiH//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPxCn/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFRQXH/2gAIAQEAAT8QWQoiPIOywYm74/IgCyCnJce2uQhQO8nLAABon//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-7.jpg\"\n        title=\"image-7.jpg\"\n        src=\"/static/1d4dbd2fa77116b4a3fe29acd8527ce5/29d31/image-7.jpg\"\n        srcset=\"/static/1d4dbd2fa77116b4a3fe29acd8527ce5/e52aa/image-7.jpg 175w,\n/static/1d4dbd2fa77116b4a3fe29acd8527ce5/70ebb/image-7.jpg 350w,\n/static/1d4dbd2fa77116b4a3fe29acd8527ce5/29d31/image-7.jpg 700w,\n/static/1d4dbd2fa77116b4a3fe29acd8527ce5/9ecec/image-7.jpg 1050w,\n/static/1d4dbd2fa77116b4a3fe29acd8527ce5/1ef88/image-7.jpg 1242w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h6><em><div style=\"text-align: right\"> - by Quoc Le </div></em></h6>","id":"2c9337dd-4bda-555e-8a57-9a80f4802e9f","frontmatter":{"title":"[iOS] iOS 14 và xu hướng UI mobile 2020","date":"19-07-2020","tags":["ios"]},"fields":{"slug":"/ios-14-va-xu-huong-ui-mobile-2020/","readingTime":{"text":"3 min read"}}}},{"node":{"excerpt":"Vấn đề đặt ra Tạo ra một View có animation sóng trong iOS với Swift. Ý tưởng Sử dụng phương trình sóng cơ trong vật lý là: y = (2π( - )) Với: A là biên độ của sóng t là thời gian T là chu kì của sóng…","snippet":"<html><head></head><body><h3>V&#x1EA5;n &#x111;&#x1EC1; &#x111;&#x1EB7;t ra</h3> <ul> <li>T&#x1EA1;o ra m&#x1ED9;t View c&#xF3; animation s&#xF3;ng trong iOS v&#x1EDB;i Swift.</li> </ul> <h3>&#xDD; t&#x1B0;&#x1EDF;ng</h3> <p>S&#x1EED; d&#x1EE5;ng ph&#x1B0;&#x1A1;ng tr&#xEC;nh s&#xF3;ng c&#x1A1; trong v&#x1EAD;t l&#xFD; l&#xE0;:</p> <blockquote> <p>y = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>cos</mi><mo>&#x2061;</mo></mrow><annotation encoding=\"application/x-tex\">\\cos</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mop\">cos</span></span></span></span>(2&#x3C0;(<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>t</mi><mi>T</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{t}{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.169556em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824556em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">&#x200B;</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> - <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>x</mi><mi>&#x3BB;</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{x}{&#x3BB;}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">&#x3BB;</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">&#x200B;&#x2026;</span></span></span></span></span></span></span></span></p></blockquote></body></html>","html":"<h2>Vấn đề đặt ra</h2>\n<ul>\n<li>Tạo ra một View có animation sóng trong iOS với Swift.</li>\n</ul>\n<h2>Ý tưởng</h2>\n<p>Sử dụng phương trình sóng cơ trong vật lý là:</p>\n<blockquote>\n<p>y = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">A</span></span></span></span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\cos</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mop\">cos</span></span></span></span>(2π(<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>t</mi><mi>T</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{t}{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.169556em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824556em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> - <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>x</mi><mi>λ</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{x}{λ}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.040392em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">λ</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>))</p>\n</blockquote>\n<p>Với:</p>\n<ul>\n<li>A là biên độ của sóng</li>\n<li>t là thời gian</li>\n<li>T là chu kì của sóng</li>\n<li>x là toạ độ theo trục hoành của hệ toạ độ</li>\n<li>λ là bước sóng</li>\n</ul>\n<p>Ta có công thức tính T theo λ là: T = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>λ</mi><mi>v</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{λ}{v}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">λ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>. Với v là vận tốc truyền sóng.</p>\n<p>Với công thức trên, ý tưởng để tạo chuyển động sóng là:</p>\n<blockquote>\n<p>Với biên độ A, bước sóng λ, chu kì T cố định, x là giá trị thay đổi trên trục hoành, và ứng với mỗi thời gian t tăng dần ta sẽ tìm được giá trị toạ độ y => ta tạo được một điểm CGPoint dùng để vẽ với UIBezierPath</p>\n</blockquote>\n<h2>Triển khai ý tưởng</h2>\n<ul>\n<li>Đầu tiên ta khởi tạo class <strong>WaveView</strong> với các thuộc tính và phương thức khởi tạo. Việc tạo ra một class riêng giúp ta có thể tái sử dụng ở nhiều ViewController khác nhau.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WaveView</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIView</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> waveHeight<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">didSet</span> <span class=\"token punctuation\">{</span>\n            A <span class=\"token operator\">=</span> waveHeight\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">var</span> waveSpeed<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">1.5</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">didSet</span> <span class=\"token punctuation\">{</span>\n            v <span class=\"token operator\">=</span> waveSpeed\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> A<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> v<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> 𝛌<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> T<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> t<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> pi <span class=\"token operator\">=</span> <span class=\"token builtin\">CGFloat</span><span class=\"token punctuation\">.</span>pi\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> frame<span class=\"token punctuation\">)</span>\n        backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>clear\n        A <span class=\"token operator\">=</span> waveHeight\n        v <span class=\"token operator\">=</span> waveSpeed\n        𝛌 <span class=\"token operator\">=</span> frame<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">1.2</span>\n        T <span class=\"token operator\">=</span> 𝛌 <span class=\"token operator\">/</span> v\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">required</span> <span class=\"token keyword\">init</span><span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>coder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSCoder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>coder<span class=\"token punctuation\">:</span> coder<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở trên mình đã khai báo và khởi tạo các thuộc tính như biên độ A, vận tốc v, chu kì T và bước sóng λ.</p>\n<p>Tiếp theo, để vẽ sóng thì ta cần override lại method draw của UIView.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> <span class=\"token function\">UIGraphicsGetCurrentContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">drawWave</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> context<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">drawWave</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> context<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> path <span class=\"token operator\">=</span> <span class=\"token function\">UIBezierPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span> <span class=\"token function\">Int</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> z <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> pi <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">/</span> T <span class=\"token operator\">-</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> 𝛌<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> center<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> A <span class=\"token operator\">*</span> <span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token function\">CGFloat</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>cyan<span class=\"token punctuation\">.</span><span class=\"token function\">setStroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>cyan<span class=\"token punctuation\">.</span><span class=\"token function\">setFill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">addPath</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span>cgPath<span class=\"token punctuation\">)</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">drawPath</span><span class=\"token punctuation\">(</span>using<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Ở trên, vì hàm draw có thể gọi lại nhiều lần nên cần phải dùng UIGraphicsGetCurrentContext clear đi mỗi lần nó vẽ lại. Ở hàm drawWave, mình cho x thay đổi từ 0 đến rect.width từ đó dùng để tính y theo phương trình sóng cơ mình đã đề cập ở phần ý tưởng.</p>\n<p>Nếu chỉ dừng lại ở đây, thì sẽ không có animation cho sóng vì thời gian t đang được fix cứng là 0. Do đó để t có thể tăng dần theo thời gian thì ta phải dùng tới Timer.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> timer<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CADisplayLink</span><span class=\"token operator\">?</span>\n\n<span class=\"token atrule\">@objc</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">reDraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    t <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    <span class=\"token function\">setNeedsDisplay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">CADisplayLink</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> selector<span class=\"token punctuation\">:</span> #<span class=\"token function\">selector</span><span class=\"token punctuation\">(</span>reDraw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    timer<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token builtin\">RunLoop</span><span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> forMode<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    timer<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">invalidate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token constant\">nil</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>CADisplayLink cũng giống với Timer, nó hay được dùng cho việc draw trong View vì có cơ chế tự tính thời gian repeat sao cho phù hợp với device.</p>\n<p>Cuối cùng, để sử dụng WaveView ta chỉ cần khởi tạo một instance của nó rồi addSubView vào một View trong ViewController là được. Bạn có thể tham khảo <a href=\"https://github.com/LaptrinhvaCuocsong/WaveView/blob/master/WaveViewDemo/WaveViewDemo/ViewController.swift\">tại đây</a></p>\n<p>Mình có capture video kết quả, bạn có thể download file video <a href=\"https://github.com/LaptrinhvaCuocsong/WaveView/blob/master/Demo/Screen%20Recording%202020-07-05%20at%2016.38.17.mov.zip\">tại đây</a> nhé.</p>\n<p>Như vậy, mình đã trình bày xong cách để tạo ra một chuyển động sóng đơn giản sử dụng phương trình sóng cơ. Nếu bạn có cách nào khác thì hãy chia sẻ hoặc comment phía dưới nhé 😄.</p>\n<p>Happy reading!!!</p>","id":"fa161d71-671a-562b-9a7b-110a61e332b2","frontmatter":{"title":"[Swift] Làm sao để tạo một chuyển động sóng đơn giản trong iOS với Swift","date":"04-07-2020","tags":["swift","ios"]},"fields":{"slug":"/swift-tao-animation-song-trong-ios-voi-swift/","readingTime":{"text":"4 min read"}}}}]}},"pageContext":{"tag":"ios"}},"staticQueryHashes":["3963689063","63159454","81262063"]}